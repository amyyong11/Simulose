{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/amyyong/Desktop/web%20dev/Simulose/t2dm-clinical-sim/src/components/MinecraftPatient.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useRef } from \"react\";\nimport { useFrame } from \"@react-three/fiber\";\nimport { useTexture } from \"@react-three/drei\";\nimport * as THREE from \"three\";\nimport type { Group, MeshStandardMaterial, Texture } from \"three\";\nimport type { PatientReaction } from \"@/lib/types\";\n\ntype MinecraftPatientProps = {\n  riskScore: number;\n  reaction: PatientReaction;\n  celebrateIdeal: boolean;\n  feedbackEmoji?: string | null;\n};\n\ntype Rect = {\n  x: number;\n  y: number;\n  w: number;\n  h: number;\n};\n\ntype FaceRects = {\n  right: Rect;\n  left: Rect;\n  top: Rect;\n  bottom: Rect;\n  front: Rect;\n  back: Rect;\n};\n\nconst PX = 0.0625;\nconst P = (n: number) => n * PX;\n\nconst STEVE_SKIN_URL = \"/steve.png?v=shoulders-3\";\n\nconst HEAD_FACES: FaceRects = {\n  right: { x: 0, y: 8, w: 8, h: 8 },\n  left: { x: 16, y: 8, w: 8, h: 8 },\n  top: { x: 8, y: 0, w: 8, h: 8 },\n  bottom: { x: 16, y: 0, w: 8, h: 8 },\n  front: { x: 8, y: 8, w: 8, h: 8 },\n  back: { x: 24, y: 8, w: 8, h: 8 },\n};\n\nconst BODY_FACES: FaceRects = {\n  right: { x: 16, y: 20, w: 4, h: 12 },\n  left: { x: 28, y: 20, w: 4, h: 12 },\n  top: { x: 20, y: 16, w: 8, h: 4 },\n  bottom: { x: 28, y: 16, w: 8, h: 4 },\n  front: { x: 20, y: 20, w: 8, h: 12 },\n  back: { x: 32, y: 20, w: 8, h: 12 },\n};\n\nconst ARM_RIGHT_FACES: FaceRects = {\n  right: { x: 40, y: 20, w: 4, h: 12 },\n  left: { x: 48, y: 20, w: 4, h: 12 },\n  top: { x: 44, y: 16, w: 4, h: 4 },\n  bottom: { x: 48, y: 16, w: 4, h: 4 },\n  front: { x: 44, y: 20, w: 4, h: 12 },\n  back: { x: 52, y: 20, w: 4, h: 12 },\n};\n\nconst ARM_LEFT_FACES: FaceRects = {\n  right: { x: 32, y: 52, w: 4, h: 12 },\n  left: { x: 40, y: 52, w: 4, h: 12 },\n  top: { x: 36, y: 48, w: 4, h: 4 },\n  bottom: { x: 40, y: 48, w: 4, h: 4 },\n  front: { x: 36, y: 52, w: 4, h: 12 },\n  back: { x: 44, y: 52, w: 4, h: 12 },\n};\n\nconst LEG_RIGHT_FACES: FaceRects = {\n  right: { x: 0, y: 20, w: 4, h: 12 },\n  left: { x: 8, y: 20, w: 4, h: 12 },\n  top: { x: 4, y: 16, w: 4, h: 4 },\n  bottom: { x: 8, y: 16, w: 4, h: 4 },\n  front: { x: 4, y: 20, w: 4, h: 12 },\n  back: { x: 12, y: 20, w: 4, h: 12 },\n};\n\nconst LEG_LEFT_FACES: FaceRects = {\n  right: { x: 16, y: 52, w: 4, h: 12 },\n  left: { x: 24, y: 52, w: 4, h: 12 },\n  top: { x: 20, y: 48, w: 4, h: 4 },\n  bottom: { x: 24, y: 48, w: 4, h: 4 },\n  front: { x: 20, y: 52, w: 4, h: 12 },\n  back: { x: 28, y: 52, w: 4, h: 12 },\n};\n\nfunction cropTexture(image: HTMLImageElement, rect: Rect): Texture {\n  const canvas = document.createElement(\"canvas\");\n  canvas.width = rect.w;\n  canvas.height = rect.h;\n\n  const ctx = canvas.getContext(\"2d\");\n  if (!ctx) {\n    throw new Error(\"Could not create skin crop context\");\n  }\n\n  ctx.imageSmoothingEnabled = false;\n  ctx.clearRect(0, 0, rect.w, rect.h);\n  ctx.drawImage(\n    image,\n    rect.x,\n    rect.y,\n    rect.w,\n    rect.h,\n    0,\n    0,\n    rect.w,\n    rect.h\n  );\n\n  const texture = new THREE.CanvasTexture(canvas);\n  texture.flipY = true;\n  texture.colorSpace = THREE.SRGBColorSpace;\n  texture.magFilter = THREE.NearestFilter;\n  texture.minFilter = THREE.NearestFilter;\n  texture.generateMipmaps = false;\n  texture.wrapS = THREE.ClampToEdgeWrapping;\n  texture.wrapT = THREE.ClampToEdgeWrapping;\n  texture.needsUpdate = true;\n\n  return texture;\n}\n\nfunction materialFromRect(image: HTMLImageElement, rect: Rect): MeshStandardMaterial {\n  return new THREE.MeshStandardMaterial({\n    map: cropTexture(image, rect),\n    roughness: 1,\n    metalness: 0,\n    flatShading: true,\n  });\n}\n\nfunction makeFaceMaterials(image: HTMLImageElement, faces: FaceRects): MeshStandardMaterial[] {\n  // BoxGeometry material order: right, left, top, bottom, front, back\n  return [\n    materialFromRect(image, faces.right),\n    materialFromRect(image, faces.left),\n    materialFromRect(image, faces.top),\n    materialFromRect(image, faces.bottom),\n    materialFromRect(image, faces.front),\n    materialFromRect(image, faces.back),\n  ];\n}\n\nfunction fallbackMaterials(color: string): MeshStandardMaterial[] {\n  const mat = new THREE.MeshStandardMaterial({ color, roughness: 1, metalness: 0, flatShading: true });\n  return [mat, mat, mat, mat, mat, mat];\n}\n\nexport function MinecraftPatient({ riskScore, reaction, celebrateIdeal, feedbackEmoji }: MinecraftPatientProps) {\n  const root = useRef<Group>(null);\n  const body = useRef<Group>(null);\n  const head = useRef<Group>(null);\n  const armRight = useRef<Group>(null);\n  const armLeft = useRef<Group>(null);\n  const legRight = useRef<Group>(null);\n  const legLeft = useRef<Group>(null);\n  const thumbsRef = useRef<Group>(null);\n  const thumbSprites = useRef<Array<THREE.Sprite | null>>([]);\n  const deathProgress = useRef(0);\n\n  const steveTexture = useTexture(STEVE_SKIN_URL);\n\n  const image = steveTexture.image as HTMLImageElement | undefined;\n  const validSkin = !!image && image.width === 64 && image.height === 64;\n\n  const headMaterials = useMemo(() => {\n    if (!image || !validSkin) return fallbackMaterials(\"#b9836d\");\n    return makeFaceMaterials(image, HEAD_FACES);\n  }, [image, validSkin]);\n\n  const bodyMaterials = useMemo(() => {\n    const mats = !image || !validSkin ? fallbackMaterials(\"#89CFF0\") : makeFaceMaterials(image, BODY_FACES);\n    mats.forEach((mat) => mat.color.set(\"#89CFF0\"));\n    return mats;\n  }, [image, validSkin]);\n\n  const armRightMaterials = useMemo(() => {\n    if (!image || !validSkin) return fallbackMaterials(\"#b9836d\");\n    return makeFaceMaterials(image, ARM_RIGHT_FACES);\n  }, [image, validSkin]);\n\n  const armLeftMaterials = useMemo(() => {\n    if (!image || !validSkin) return fallbackMaterials(\"#b9836d\");\n    return makeFaceMaterials(image, ARM_LEFT_FACES);\n  }, [image, validSkin]);\n\n  const legRightMaterials = useMemo(() => {\n    if (!image || !validSkin) return fallbackMaterials(\"#3e41ab\");\n    return makeFaceMaterials(image, LEG_RIGHT_FACES);\n  }, [image, validSkin]);\n\n  const legLeftMaterials = useMemo(() => {\n    if (!image || !validSkin) return fallbackMaterials(\"#3e41ab\");\n    return makeFaceMaterials(image, LEG_LEFT_FACES);\n  }, [image, validSkin]);\n  const skinMaterials = useMemo(\n    () => [\n      ...headMaterials,\n      ...bodyMaterials,\n      ...armRightMaterials,\n      ...armLeftMaterials,\n      ...legRightMaterials,\n      ...legLeftMaterials,\n    ],\n    [headMaterials, bodyMaterials, armRightMaterials, armLeftMaterials, legRightMaterials, legLeftMaterials]\n  );\n  const emojiTexture = useMemo(() => {\n    const glyph = feedbackEmoji ?? \"ðŸ‘\";\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = 96;\n    canvas.height = 96;\n    const ctx = canvas.getContext(\"2d\");\n    if (!ctx) return null;\n    ctx.clearRect(0, 0, 96, 96);\n    ctx.font = \"72px sans-serif\";\n    ctx.textAlign = \"center\";\n    ctx.textBaseline = \"middle\";\n    ctx.fillText(glyph, 48, 52);\n    const texture = new THREE.CanvasTexture(canvas);\n    texture.colorSpace = THREE.SRGBColorSpace;\n    texture.needsUpdate = true;\n    return texture;\n  }, [feedbackEmoji]);\n  const thumbsMaterial = useMemo(() => {\n    if (!emojiTexture) return null;\n    return new THREE.SpriteMaterial({ map: emojiTexture, transparent: true, depthWrite: false });\n  }, [emojiTexture]);\n\n  useEffect(() => {\n    return () => {\n      emojiTexture?.dispose();\n      thumbsMaterial?.dispose();\n    };\n  }, [emojiTexture, thumbsMaterial]);\n\n  useFrame(({ clock }, delta) => {\n    if (!root.current || !body.current || !head.current || !armRight.current || !armLeft.current || !legRight.current || !legLeft.current) return;\n    const t = clock.getElapsedTime();\n    const baselineBob = 0.008 + (100 - Math.max(0, Math.min(100, riskScore))) * 0.00004;\n\n    let bodyBob = Math.sin(t * 1.4) * baselineBob;\n    let rootRotY = Math.sin(t * 0.45) * 0.05;\n    let rootRotZ = 0;\n    let rootPosY = -0.62;\n    let headRotX = 0;\n    let headRotZ = 0;\n    let rightArmRotX = 0;\n    let rightArmRotZ = 0;\n    let leftArmRotX = 0;\n    let leftArmRotZ = 0;\n    let rightLegRotX = 0;\n    let leftLegRotX = 0;\n\n    if (celebrateIdeal) {\n      bodyBob = Math.abs(Math.sin(t * 5.4)) * 0.13;\n      rootRotY = Math.sin(t * 2.4) * 0.14;\n      headRotX = Math.sin(t * 4.8) * 0.18;\n      rightArmRotX = -1.25 + Math.sin(t * 6.4) * 0.15;\n      leftArmRotX = -1.25 + Math.sin(t * 6.4 + 0.5) * 0.15;\n      rightArmRotZ = 0.3;\n      leftArmRotZ = -0.3;\n      rightLegRotX = Math.sin(t * 5.6) * 0.1;\n      leftLegRotX = -Math.sin(t * 5.6) * 0.1;\n    } else if (reaction === \"happy\") {\n      bodyBob = Math.sin(t * 3.1) * 0.024;\n      rootRotY = Math.sin(t * 1.5) * 0.08;\n      headRotX = Math.sin(t * 2.2) * 0.14;\n      rightArmRotX = -1.0 + Math.sin(t * 4.2) * 0.2;\n      leftArmRotX = -1.0 + Math.sin(t * 4.2 + 0.6) * 0.2;\n      rightArmRotZ = 0.22;\n      leftArmRotZ = -0.22;\n      rightLegRotX = Math.sin(t * 3.2) * 0.06;\n      leftLegRotX = -Math.sin(t * 3.2) * 0.06;\n    } else if (reaction === \"mildly_uncomfortable\") {\n      bodyBob = Math.sin(t * 1.8) * 0.012;\n      headRotZ = Math.sin(t * 1.6) * 0.12;\n      headRotX = 0.07;\n      rightArmRotX = 0.12;\n      leftArmRotX = 0.12;\n      rightArmRotZ = 0.08;\n      leftArmRotZ = -0.08;\n      rootRotY = Math.sin(t * 0.8) * 0.04;\n    } else if (reaction === \"uncomfortable\") {\n      bodyBob = Math.sin(t * 1.0) * 0.006;\n      rootRotY = Math.sin(t * 0.6) * 0.025;\n      headRotX = 0.2;\n      headRotZ = Math.sin(t * 1.4) * 0.08;\n      rightArmRotX = 0.48;\n      leftArmRotX = 0.48;\n      rightArmRotZ = 0.15;\n      leftArmRotZ = -0.15;\n      rightLegRotX = -0.05;\n      leftLegRotX = -0.05;\n    } else if (reaction === \"critical\") {\n      bodyBob = 0;\n      rootRotY = 0;\n      rootRotZ = -1.55;\n      rootPosY = -0.68;\n      headRotX = 0.55;\n      headRotZ = -0.2;\n      rightArmRotX = 1.1 + Math.sin(t * 20) * 0.08;\n      leftArmRotX = 1.1 + Math.cos(t * 17) * 0.08;\n      rightArmRotZ = 0.35;\n      leftArmRotZ = -0.35;\n      rightLegRotX = 0.25;\n      leftLegRotX = -0.05;\n    }\n\n    const criticalTarget = reaction === \"critical\" ? 1 : 0;\n    deathProgress.current = THREE.MathUtils.damp(\n      deathProgress.current,\n      criticalTarget,\n      criticalTarget ? 3.4 : 6.2,\n      delta\n    );\n    const death = deathProgress.current;\n    // Keep the patient visible even in critical collapse states.\n    const fade = 1;\n    const scale = 1;\n\n    rootRotZ = THREE.MathUtils.lerp(rootRotZ, -Math.PI / 2, death);\n    rootPosY = THREE.MathUtils.lerp(rootPosY, -0.72, death);\n    bodyBob *= 1 - death;\n\n    body.current.position.y = THREE.MathUtils.damp(body.current.position.y, bodyBob, 7, delta);\n    root.current.rotation.y = THREE.MathUtils.damp(root.current.rotation.y, rootRotY, 7, delta);\n    root.current.rotation.z = THREE.MathUtils.damp(root.current.rotation.z, rootRotZ, 7, delta);\n    root.current.position.y = THREE.MathUtils.damp(root.current.position.y, rootPosY, 7, delta);\n    root.current.scale.set(scale, scale, scale);\n\n    head.current.rotation.x = THREE.MathUtils.damp(head.current.rotation.x, headRotX, 8, delta);\n    head.current.rotation.z = THREE.MathUtils.damp(head.current.rotation.z, headRotZ, 8, delta);\n    armRight.current.rotation.x = THREE.MathUtils.damp(armRight.current.rotation.x, rightArmRotX, 8, delta);\n    armRight.current.rotation.z = THREE.MathUtils.damp(armRight.current.rotation.z, rightArmRotZ, 8, delta);\n    armLeft.current.rotation.x = THREE.MathUtils.damp(armLeft.current.rotation.x, leftArmRotX, 8, delta);\n    armLeft.current.rotation.z = THREE.MathUtils.damp(armLeft.current.rotation.z, leftArmRotZ, 8, delta);\n    legRight.current.rotation.x = THREE.MathUtils.damp(legRight.current.rotation.x, rightLegRotX, 8, delta);\n    legLeft.current.rotation.x = THREE.MathUtils.damp(legLeft.current.rotation.x, leftLegRotX, 8, delta);\n\n    skinMaterials.forEach((mat) => {\n      mat.transparent = fade < 0.999;\n      mat.opacity = fade;\n    });\n\n    if (thumbsRef.current) {\n      const showEmojiTrail = !!feedbackEmoji;\n      thumbsRef.current.visible = showEmojiTrail;\n      if (showEmojiTrail) {\n        // Keep emoji trail rising upward even when the body is tilted/fallen.\n        thumbsRef.current.rotation.z = -root.current.rotation.z;\n        thumbSprites.current.forEach((sprite, i) => {\n          if (!sprite) return;\n          const phase = t * 1.9 + i * 0.7;\n          const radius = 0.45 + (i % 3) * 0.08;\n          sprite.position.x = Math.cos(phase) * radius;\n          sprite.position.z = Math.sin(phase) * radius * 0.5;\n          sprite.position.y = 0.2 + ((phase * 0.35) % 1.8);\n          const size = 0.2 + ((i % 4) * 0.03);\n          sprite.scale.set(size, size, size);\n          sprite.material.opacity = 0.55 + 0.45 * Math.abs(Math.sin(phase * 1.2));\n        });\n      }\n    }\n  });\n\n  return (\n    <group ref={root} position={[-0.6, -0.8, 0.25]}>\n      <group ref={body}>\n        <group ref={legRight} position={[-P(2), P(6), 0]}>\n          <mesh castShadow material={legRightMaterials}>\n            <boxGeometry args={[P(4), P(12), P(4)]} />\n          </mesh>\n        </group>\n        <group ref={legLeft} position={[P(2), P(6), 0]}>\n          <mesh castShadow material={legLeftMaterials}>\n            <boxGeometry args={[P(4), P(12), P(4)]} />\n          </mesh>\n        </group>\n\n        <mesh position={[0, P(18), 0]} castShadow material={bodyMaterials}>\n          <boxGeometry args={[P(8), P(12), P(4)]} />\n        </mesh>\n\n        <group ref={armRight} position={[-P(6), P(18), 0]}>\n          <mesh castShadow material={armRightMaterials}>\n            <boxGeometry args={[P(4), P(12), P(4)]} />\n          </mesh>\n        </group>\n        <group ref={armLeft} position={[P(6), P(18), 0]}>\n          <mesh castShadow material={armLeftMaterials}>\n            <boxGeometry args={[P(4), P(12), P(4)]} />\n          </mesh>\n        </group>\n\n        <group ref={head} position={[0, P(28), 0]}>\n          <mesh castShadow material={headMaterials}>\n            <boxGeometry args={[P(8), P(8), P(8)]} />\n          </mesh>\n        </group>\n\n        {thumbsMaterial && (\n          <group ref={thumbsRef} position={[0, P(22), 0]} visible={false}>\n            {Array.from({ length: 9 }).map((_, i) => (\n              <sprite\n                key={i}\n                ref={(el) => {\n                  thumbSprites.current[i] = el;\n                }}\n                material={thumbsMaterial}\n                position={[0, 0, 0]}\n                scale={[0.2, 0.2, 0.2]}\n              />\n            ))}\n          </group>\n        )}\n      </group>\n    </group>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 819, "column": 0}, "map": {"version":3,"sources":["file:///Users/amyyong/Desktop/web%20dev/Simulose/t2dm-clinical-sim/src/components/GhostDoctor.tsx"],"sourcesContent":["\"use client\";\n\nimport { useMemo, useRef } from \"react\";\nimport { useFrame } from \"@react-three/fiber\";\nimport { Html } from \"@react-three/drei\";\nimport type { Group } from \"three\";\n\nexport type DoctorMood = \"neutral\" | \"happy\" | \"concerned\" | \"strict\";\n\ntype GhostDoctorProps = {\n  mood: DoctorMood;\n  promptText: string;\n  showBubble?: boolean;\n  showPanelTrail?: boolean;\n};\n\nexport function GhostDoctor({\n  mood,\n  promptText,\n  showBubble = true,\n  showPanelTrail = false,\n}: GhostDoctorProps) {\n  const root = useRef<Group>(null);\n  const leftBrow = useRef<Group>(null);\n  const rightBrow = useRef<Group>(null);\n  const mouth = useRef<Group>(null);\n\n  const expression = useMemo(() => {\n    if (mood === \"happy\") {\n      return { browY: 0.26, browRotL: -0.2, browRotR: 0.2, mouthY: -0.08, mouthRot: 0.15, mouthScaleY: 0.65 };\n    }\n    if (mood === \"concerned\") {\n      return { browY: 0.24, browRotL: 0.3, browRotR: -0.3, mouthY: -0.06, mouthRot: -0.1, mouthScaleY: 0.45 };\n    }\n    if (mood === \"strict\") {\n      return { browY: 0.23, browRotL: 0.4, browRotR: -0.4, mouthY: -0.04, mouthRot: -0.25, mouthScaleY: 0.35 };\n    }\n    return { browY: 0.25, browRotL: 0.06, browRotR: -0.06, mouthY: -0.06, mouthRot: 0, mouthScaleY: 0.4 };\n  }, [mood]);\n\n  useFrame(({ clock }) => {\n    if (!root.current) return;\n    const t = clock.getElapsedTime();\n    root.current.position.y = 0.05 + Math.sin(t * 1.6) * 0.04;\n    root.current.rotation.y = Math.sin(t * 0.9) * 0.16;\n  });\n\n  return (\n    <group ref={root} position={[0.6, 0, 0.15]}>\n      <group position={[0, 0.35, 0]}>\n        <mesh castShadow>\n          <sphereGeometry args={[0.38, 24, 24]} />\n          <meshStandardMaterial color=\"#d7eef9\" transparent opacity={0.86} roughness={0.25} />\n        </mesh>\n        <mesh position={[0, -0.42, 0]} castShadow>\n          <sphereGeometry args={[0.42, 24, 18]} />\n          <meshStandardMaterial color=\"#d7eef9\" transparent opacity={0.86} roughness={0.3} />\n        </mesh>\n        <mesh position={[0, -0.78, 0]} castShadow>\n          <coneGeometry args={[0.24, 0.42, 16]} />\n          <meshStandardMaterial color=\"#c5e4f4\" transparent opacity={0.78} roughness={0.35} />\n        </mesh>\n      </group>\n\n      <group position={[0, 0.5, 0.34]}>\n        <mesh position={[-0.14, 0.02, 0]}>\n          <sphereGeometry args={[0.045, 14, 14]} />\n          <meshStandardMaterial color=\"#1f2835\" />\n        </mesh>\n        <mesh position={[0.14, 0.02, 0]}>\n          <sphereGeometry args={[0.045, 14, 14]} />\n          <meshStandardMaterial color=\"#1f2835\" />\n        </mesh>\n        <mesh position={[-0.14, 0.02, 0.005]}>\n          <torusGeometry args={[0.08, 0.012, 8, 24]} />\n          <meshStandardMaterial color=\"#4a5e71\" metalness={0.2} roughness={0.3} />\n        </mesh>\n        <mesh position={[0.14, 0.02, 0.005]}>\n          <torusGeometry args={[0.08, 0.012, 8, 24]} />\n          <meshStandardMaterial color=\"#4a5e71\" metalness={0.2} roughness={0.3} />\n        </mesh>\n        <mesh position={[0, 0.02, 0.005]}>\n          <boxGeometry args={[0.1, 0.012, 0.012]} />\n          <meshStandardMaterial color=\"#4a5e71\" />\n        </mesh>\n\n        <group ref={leftBrow} position={[-0.14, expression.browY, 0]} rotation={[0, 0, expression.browRotL]}>\n          <mesh>\n            <boxGeometry args={[0.14, 0.02, 0.02]} />\n            <meshStandardMaterial color=\"#243244\" />\n          </mesh>\n        </group>\n        <group ref={rightBrow} position={[0.14, expression.browY, 0]} rotation={[0, 0, expression.browRotR]}>\n          <mesh>\n            <boxGeometry args={[0.14, 0.02, 0.02]} />\n            <meshStandardMaterial color=\"#243244\" />\n          </mesh>\n        </group>\n        <group ref={mouth} position={[0, expression.mouthY, 0]} rotation={[0, 0, expression.mouthRot]} scale={[1, expression.mouthScaleY, 1]}>\n          <mesh>\n            <torusGeometry args={[0.1, 0.014, 8, 24, Math.PI]} />\n            <meshStandardMaterial color=\"#243244\" />\n          </mesh>\n        </group>\n      </group>\n\n      {showBubble && (\n        <Html position={[-0.04, 1.42, 0.18]} center>\n          <div\n            onWheel={(e) => e.stopPropagation()}\n            style={{\n              position: \"relative\",\n              background: \"rgba(255,255,255,0.96)\",\n              color: \"#1f2c3a\",\n              border: \"1px solid rgba(31,44,58,0.2)\",\n              borderRadius: \"18px\",\n              padding: \"10px 12px\",\n              fontSize: \"13px\",\n              lineHeight: 1.25,\n              fontWeight: 600,\n              maxWidth: \"250px\",\n              width: \"max-content\",\n              maxHeight: \"180px\",\n              boxShadow: \"0 8px 20px rgba(0,0,0,0.22)\",\n              whiteSpace: \"pre-wrap\",\n              overflowY: \"auto\",\n              overflowX: \"hidden\",\n              pointerEvents: \"auto\",\n              touchAction: \"pan-y\",\n              overscrollBehavior: \"contain\",\n              WebkitOverflowScrolling: \"touch\",\n            }}\n          >\n            {promptText}\n          </div>\n        </Html>\n      )}\n\n      {showPanelTrail && (\n        <Html transform position={[0.9, 1.08, 0.2]}>\n          <div\n            style={{\n              display: \"grid\",\n              gap: \"8px\",\n              justifyItems: \"start\",\n              pointerEvents: \"none\",\n            }}\n          >\n            <span\n              style={{\n                width: \"18px\",\n                height: \"18px\",\n                borderRadius: \"999px\",\n                background: \"rgba(28, 32, 42, 0.92)\",\n                border: \"1px solid rgba(80, 95, 120, 0.4)\",\n                boxShadow: \"0 4px 10px rgba(0,0,0,0.22)\",\n              }}\n            />\n            <span\n              style={{\n                width: \"12px\",\n                height: \"12px\",\n                borderRadius: \"999px\",\n                marginLeft: \"10px\",\n                background: \"rgba(28, 32, 42, 0.92)\",\n                border: \"1px solid rgba(80, 95, 120, 0.4)\",\n                boxShadow: \"0 3px 8px rgba(0,0,0,0.2)\",\n              }}\n            />\n            <span\n              style={{\n                width: \"8px\",\n                height: \"8px\",\n                borderRadius: \"999px\",\n                marginLeft: \"18px\",\n                background: \"rgba(28, 32, 42, 0.92)\",\n                border: \"1px solid rgba(80, 95, 120, 0.4)\",\n                boxShadow: \"0 2px 6px rgba(0,0,0,0.18)\",\n              }}\n            />\n          </div>\n        </Html>\n      )}\n    </group>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1456, "column": 0}, "map": {"version":3,"sources":["file:///Users/amyyong/Desktop/web%20dev/Simulose/t2dm-clinical-sim/src/components/ClinicScene3D.tsx"],"sourcesContent":["\"use client\";\n\nimport { Suspense } from \"react\";\nimport { Canvas } from \"@react-three/fiber\";\nimport { OrbitControls } from \"@react-three/drei\";\nimport { MinecraftPatient } from \"@/components/MinecraftPatient\";\nimport { GhostDoctor } from \"@/components/GhostDoctor\";\nimport type { DoctorMood } from \"@/components/GhostDoctor\";\nimport type { PatientReaction } from \"@/lib/types\";\n\nfunction ClinicRoom() {\n  return (\n    <group>\n      {/* Floor */}\n      <mesh rotation={[-Math.PI / 2, 0, 0]} position={[0, -0.6, 0]} receiveShadow>\n        <planeGeometry args={[12, 12]} />\n        <meshStandardMaterial color=\"#b7885a\" roughness={0.9} metalness={0.02} />\n      </mesh>\n      {/* Back wall */}\n      <mesh position={[0, 2.5, -4]} receiveShadow>\n        <planeGeometry args={[12, 6]} />\n        <meshStandardMaterial color=\"#c8d0d8\" roughness={0.95} />\n      </mesh>\n      {/* Left wall */}\n      <mesh position={[-4, 2.5, 0]} rotation={[0, Math.PI / 2, 0]} receiveShadow>\n        <planeGeometry args={[8, 6]} />\n        <meshStandardMaterial color=\"#d0d6dc\" roughness={0.95} />\n      </mesh>\n      {/* Right wall */}\n      <mesh position={[4, 2.5, 0]} rotation={[0, -Math.PI / 2, 0]} receiveShadow>\n        <planeGeometry args={[8, 6]} />\n        <meshStandardMaterial color=\"#d0d6dc\" roughness={0.95} />\n      </mesh>\n      {/* Exam table */}\n      <mesh position={[2.2, -0.35, -2.8]} castShadow receiveShadow>\n        <boxGeometry args={[1.4, 0.5, 0.6]} />\n        <meshStandardMaterial color=\"#7d8fa8\" roughness={0.72} />\n      </mesh>\n      {/* Desk area */}\n      <mesh position={[-1.4, 0.06, -2.2]} castShadow receiveShadow>\n        <boxGeometry args={[1.8, 0.12, 0.75]} />\n        <meshStandardMaterial color=\"#8b6b4a\" roughness={0.78} />\n      </mesh>\n      <mesh position={[-2.15, -0.28, -2.48]} castShadow receiveShadow>\n        <boxGeometry args={[0.1, 0.64, 0.1]} />\n        <meshStandardMaterial color=\"#6f5a44\" roughness={0.8} />\n      </mesh>\n      <mesh position={[-0.65, -0.28, -2.48]} castShadow receiveShadow>\n        <boxGeometry args={[0.1, 0.64, 0.1]} />\n        <meshStandardMaterial color=\"#6f5a44\" roughness={0.8} />\n      </mesh>\n      <mesh position={[-2.15, -0.28, -1.92]} castShadow receiveShadow>\n        <boxGeometry args={[0.1, 0.64, 0.1]} />\n        <meshStandardMaterial color=\"#6f5a44\" roughness={0.8} />\n      </mesh>\n      <mesh position={[-0.65, -0.28, -1.92]} castShadow receiveShadow>\n        <boxGeometry args={[0.1, 0.64, 0.1]} />\n        <meshStandardMaterial color=\"#6f5a44\" roughness={0.8} />\n      </mesh>\n\n      {/* Desk monitor + keyboard */}\n      <mesh position={[-1.25, 0.33, -2.28]} castShadow receiveShadow>\n        <boxGeometry args={[0.55, 0.34, 0.08]} />\n        <meshStandardMaterial color=\"#1f2530\" roughness={0.35} metalness={0.25} />\n      </mesh>\n      <mesh position={[-1.25, 0.33, -2.22]}>\n        <boxGeometry args={[0.46, 0.24, 0.01]} />\n        <meshStandardMaterial color=\"#7fb0de\" emissive=\"#3e6795\" emissiveIntensity={0.16} />\n      </mesh>\n      <mesh position={[-1.25, 0.19, -2.28]} castShadow>\n        <boxGeometry args={[0.07, 0.12, 0.04]} />\n        <meshStandardMaterial color=\"#2b3038\" roughness={0.5} />\n      </mesh>\n      <mesh position={[-1.25, 0.125, -2.28]} castShadow>\n        <boxGeometry args={[0.22, 0.02, 0.12]} />\n        <meshStandardMaterial color=\"#2b3038\" roughness={0.5} />\n      </mesh>\n      <mesh position={[-1.58, 0.135, -2.05]} castShadow receiveShadow>\n        <boxGeometry args={[0.34, 0.02, 0.12]} />\n        <meshStandardMaterial color=\"#dadfe7\" roughness={0.55} />\n      </mesh>\n\n      {/* Office chair */}\n      <mesh position={[-1.4, -0.28, -1.55]} castShadow receiveShadow>\n        <boxGeometry args={[0.45, 0.1, 0.42]} />\n        <meshStandardMaterial color=\"#4f6478\" roughness={0.72} />\n      </mesh>\n      <mesh position={[-1.4, -0.07, -1.73]} castShadow receiveShadow>\n        <boxGeometry args={[0.45, 0.45, 0.1]} />\n        <meshStandardMaterial color=\"#4f6478\" roughness={0.72} />\n      </mesh>\n      <mesh position={[-1.58, -0.45, -1.73]} castShadow receiveShadow>\n        <boxGeometry args={[0.04, 0.24, 0.04]} />\n        <meshStandardMaterial color=\"#3f4b5a\" roughness={0.58} metalness={0.15} />\n      </mesh>\n      <mesh position={[-1.22, -0.45, -1.73]} castShadow receiveShadow>\n        <boxGeometry args={[0.04, 0.24, 0.04]} />\n        <meshStandardMaterial color=\"#3f4b5a\" roughness={0.58} metalness={0.15} />\n      </mesh>\n      <mesh position={[-1.58, -0.45, -1.37]} castShadow receiveShadow>\n        <boxGeometry args={[0.04, 0.24, 0.04]} />\n        <meshStandardMaterial color=\"#3f4b5a\" roughness={0.58} metalness={0.15} />\n      </mesh>\n      <mesh position={[-1.22, -0.45, -1.37]} castShadow receiveShadow>\n        <boxGeometry args={[0.04, 0.24, 0.04]} />\n        <meshStandardMaterial color=\"#3f4b5a\" roughness={0.58} metalness={0.15} />\n      </mesh>\n\n      {/* Visitor chair near exam table */}\n      <mesh position={[1.2, -0.35, -2.0]} castShadow receiveShadow>\n        <boxGeometry args={[0.42, 0.08, 0.4]} />\n        <meshStandardMaterial color=\"#6f7f90\" roughness={0.76} />\n      </mesh>\n      <mesh position={[1.2, -0.16, -2.15]} castShadow receiveShadow>\n        <boxGeometry args={[0.42, 0.34, 0.08]} />\n        <meshStandardMaterial color=\"#6f7f90\" roughness={0.76} />\n      </mesh>\n      <mesh position={[1.03, -0.5, -2.14]} castShadow receiveShadow>\n        <boxGeometry args={[0.04, 0.2, 0.04]} />\n        <meshStandardMaterial color=\"#596a7b\" roughness={0.76} />\n      </mesh>\n      <mesh position={[1.37, -0.5, -2.14]} castShadow receiveShadow>\n        <boxGeometry args={[0.04, 0.2, 0.04]} />\n        <meshStandardMaterial color=\"#596a7b\" roughness={0.76} />\n      </mesh>\n      <mesh position={[1.03, -0.5, -1.86]} castShadow receiveShadow>\n        <boxGeometry args={[0.04, 0.2, 0.04]} />\n        <meshStandardMaterial color=\"#596a7b\" roughness={0.76} />\n      </mesh>\n      <mesh position={[1.37, -0.5, -1.86]} castShadow receiveShadow>\n        <boxGeometry args={[0.04, 0.2, 0.04]} />\n        <meshStandardMaterial color=\"#596a7b\" roughness={0.76} />\n      </mesh>\n      {/* Side table with plant or object - warmth */}\n      <mesh position={[-2.5, -0.35, -2.5]} castShadow receiveShadow>\n        <boxGeometry args={[0.5, 0.5, 0.4]} />\n        <meshStandardMaterial color=\"#8b7355\" roughness={0.8} />\n      </mesh>\n      <mesh position={[-2.5, -0.03, -2.5]} castShadow receiveShadow>\n        <cylinderGeometry args={[0.1, 0.1, 0.14, 12]} />\n        <meshStandardMaterial color=\"#8f9eab\" roughness={0.7} />\n      </mesh>\n      <mesh position={[-2.5, 0.165, -2.5]} castShadow>\n        <coneGeometry args={[0.16, 0.25, 10]} />\n        <meshStandardMaterial color=\"#4b9a67\" roughness={0.8} />\n      </mesh>\n\n      {/* Back-wall floating cabinet */}\n      <mesh position={[0, 2.2, -3.92]} castShadow receiveShadow>\n        <boxGeometry args={[2.6, 0.7, 0.26]} />\n        <meshStandardMaterial color=\"#d9dee6\" roughness={0.65} metalness={0.08} />\n      </mesh>\n      <mesh position={[0, 2.2, -3.78]} castShadow>\n        <boxGeometry args={[2.5, 0.62, 0.03]} />\n        <meshStandardMaterial color=\"#b7c4d4\" roughness={0.22} metalness={0.45} />\n      </mesh>\n\n      {/* Floor storage cabinet */}\n      <mesh position={[3.25, -0.16, -3.6]} castShadow receiveShadow>\n        <boxGeometry args={[1.25, 0.88, 0.42]} />\n        <meshStandardMaterial color=\"#ced6df\" roughness={0.72} />\n      </mesh>\n      <mesh position={[2.95, -0.16, -3.38]} castShadow>\n        <boxGeometry args={[0.56, 0.78, 0.02]} />\n        <meshStandardMaterial color=\"#aebbc9\" roughness={0.5} />\n      </mesh>\n      <mesh position={[3.55, -0.16, -3.38]} castShadow>\n        <boxGeometry args={[0.56, 0.78, 0.02]} />\n        <meshStandardMaterial color=\"#aebbc9\" roughness={0.5} />\n      </mesh>\n\n      {/* Left-wall shelf + items */}\n      <mesh position={[-3.82, 2.0, -1.1]} rotation={[0, Math.PI / 2, 0]} castShadow receiveShadow>\n        <boxGeometry args={[1.6, 0.09, 0.28]} />\n        <meshStandardMaterial color=\"#8f775c\" roughness={0.82} />\n      </mesh>\n      <mesh position={[-3.73, 2.17, -1.45]} rotation={[0, Math.PI / 2, 0]} castShadow>\n        <boxGeometry args={[0.25, 0.34, 0.16]} />\n        <meshStandardMaterial color=\"#59a37c\" roughness={0.7} />\n      </mesh>\n      <mesh position={[-3.73, 2.16, -0.78]} rotation={[0, Math.PI / 2, 0]} castShadow>\n        <boxGeometry args={[0.22, 0.3, 0.14]} />\n        <meshStandardMaterial color=\"#d8d2c2\" roughness={0.9} />\n      </mesh>\n\n      {/* Right-wall monitor panel */}\n      <mesh position={[3.86, 2.05, -1.3]} rotation={[0, -Math.PI / 2, 0]} castShadow receiveShadow>\n        <boxGeometry args={[1.65, 1.0, 0.12]} />\n        <meshStandardMaterial color=\"#252b34\" roughness={0.45} metalness={0.35} />\n      </mesh>\n      <mesh position={[3.79, 2.05, -1.3]} rotation={[0, -Math.PI / 2, 0]}>\n        <boxGeometry args={[1.42, 0.78, 0.02]} />\n        <meshStandardMaterial color=\"#78a8d8\" emissive=\"#3f6b9e\" emissiveIntensity={0.18} roughness={0.2} />\n      </mesh>\n\n      {/* Back-wall whiteboard */}\n      <mesh position={[-2.35, 2.25, -3.9]} castShadow receiveShadow>\n        <boxGeometry args={[1.6, 0.95, 0.06]} />\n        <meshStandardMaterial color=\"#f2f5f7\" roughness={0.7} />\n      </mesh>\n      <mesh position={[-2.35, 2.25, -3.86]}>\n        <boxGeometry args={[1.44, 0.8, 0.01]} />\n        <meshStandardMaterial color=\"#ffffff\" roughness={0.92} />\n      </mesh>\n\n      {/* Simple wall clock */}\n      <mesh position={[2.85, 3.15, -3.9]} castShadow>\n        <cylinderGeometry args={[0.24, 0.24, 0.06, 28]} />\n        <meshStandardMaterial color=\"#f5f5f5\" roughness={0.55} metalness={0.08} />\n      </mesh>\n      <mesh position={[2.85, 3.15, -3.86]}>\n        <boxGeometry args={[0.015, 0.13, 0.01]} />\n        <meshStandardMaterial color=\"#2f3742\" />\n      </mesh>\n      <mesh position={[2.92, 3.15, -3.86]}>\n        <boxGeometry args={[0.11, 0.012, 0.01]} />\n        <meshStandardMaterial color=\"#2f3742\" />\n      </mesh>\n\n      {/* Area rug */}\n      <mesh rotation={[-Math.PI / 2, 0, 0]} position={[0.2, -0.595, -1.45]} receiveShadow>\n        <planeGeometry args={[3.8, 2.2]} />\n        <meshStandardMaterial color=\"#c8a980\" roughness={0.98} />\n      </mesh>\n\n      {/* Ceiling lamp */}\n      <mesh position={[0, 5.35, -1.2]} castShadow>\n        <cylinderGeometry args={[0.42, 0.42, 0.08, 20]} />\n        <meshStandardMaterial color=\"#f7f1dc\" emissive=\"#f6efda\" emissiveIntensity={0.2} />\n      </mesh>\n      <mesh position={[0, 5.2, -1.2]} castShadow>\n        <cylinderGeometry args={[0.03, 0.03, 0.22, 10]} />\n        <meshStandardMaterial color=\"#7b7f86\" roughness={0.5} metalness={0.2} />\n      </mesh>\n\n      {/* Window on back wall */}\n      <mesh position={[1.65, 2.2, -3.91]} castShadow receiveShadow>\n        <boxGeometry args={[1.35, 1.0, 0.08]} />\n        <meshStandardMaterial color=\"#f0f2f5\" roughness={0.75} />\n      </mesh>\n      <mesh position={[1.65, 2.2, -3.86]}>\n        <boxGeometry args={[1.2, 0.84, 0.01]} />\n        <meshStandardMaterial color=\"#b9d6ec\" roughness={0.25} metalness={0.1} />\n      </mesh>\n      <mesh position={[1.65, 2.2, -3.855]}>\n        <boxGeometry args={[0.04, 0.84, 0.02]} />\n        <meshStandardMaterial color=\"#eef2f6\" roughness={0.7} />\n      </mesh>\n      <mesh position={[1.65, 2.2, -3.855]}>\n        <boxGeometry args={[1.2, 0.04, 0.02]} />\n        <meshStandardMaterial color=\"#eef2f6\" roughness={0.7} />\n      </mesh>\n    </group>\n  );\n}\n\ntype ClinicScene3DProps = {\n  riskScore: number;\n  reaction: PatientReaction;\n  celebrateIdeal: boolean;\n  feedbackEmoji?: string | null;\n  doctorPromptText: string;\n  doctorMood: DoctorMood;\n  doctorShowBubble?: boolean;\n  doctorShowPanelTrail?: boolean;\n};\n\nexport function ClinicScene3D({\n  riskScore,\n  reaction,\n  celebrateIdeal,\n  feedbackEmoji,\n  doctorPromptText,\n  doctorMood,\n  doctorShowBubble = true,\n  doctorShowPanelTrail = false,\n}: ClinicScene3DProps) {\n  return (\n    <div className=\"clinic-scene-3d\">\n      <Canvas\n        shadows\n        camera={{ position: [0, 1.15, 4.3], fov: 36 }}\n        gl={{ antialias: true, alpha: false }}\n      >\n        <color attach=\"background\" args={[\"#a8b8c8\"]} />\n        <ambientLight intensity={0.5} />\n        <directionalLight\n          position={[3.5, 5, 4]}\n          intensity={1.35}\n          castShadow\n          shadow-mapSize-width={1024}\n          shadow-mapSize-height={1024}\n          shadow-camera-far={14}\n          shadow-camera-left={-3.5}\n          shadow-camera-right={3.5}\n          shadow-camera-top={3.5}\n          shadow-camera-bottom={-3.5}\n          shadow-bias={-0.0001}\n        />\n        <directionalLight position={[-2.5, 2.5, 2]} intensity={0.45} color=\"#c5d4e8\" />\n        {/* Warm key on character - they're the focus, emotionally lit */}\n        <pointLight position={[0, 0.8, 2.2]} intensity={0.4} color=\"#fff5e6\" distance={5} />\n        <pointLight position={[0.5, 0.5, 1.5]} intensity={0.15} color=\"#e8f0ff\" distance={4} />\n        <ClinicRoom />\n        <Suspense fallback={null}>\n          <MinecraftPatient\n            riskScore={riskScore}\n            reaction={reaction}\n            celebrateIdeal={celebrateIdeal}\n            feedbackEmoji={feedbackEmoji}\n          />\n          <GhostDoctor\n            mood={doctorMood}\n            promptText={doctorPromptText}\n            showBubble={doctorShowBubble}\n            showPanelTrail={doctorShowPanelTrail}\n          />\n        </Suspense>\n        <OrbitControls\n          enableZoom={true}\n          zoomSpeed={0.8}\n          minDistance={3}\n          maxDistance={7}\n          enablePan={false}\n          minPolarAngle={0.5}\n          maxPolarAngle={1.45}\n          target={[0, 0.85, 0]}\n        />\n      </Canvas>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3449, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/data/cases.json"],"sourcesContent":["[{\"id\":\"case_ckd\",\"title\":\"Patient with CKD\",\"summary\":\"58-year-old with A1c 8.6%, eGFR 42 mL/min/1.73 mÂ², obesity, and history of nocturnal hypoglycemia on prior secretagogue.\",\"features\":{\"a1c\":8.6,\"bmi\":33,\"egfr\":42,\"ascvd\":false,\"hf\":false,\"costSensitive\":false,\"hypoglycemiaRisk\":true,\"weightLossGoal\":true,\"giIntolerance\":false},\"derivedTags\":[\"ckd\",\"high_hypoglycemia_risk\",\"weight_loss_goal\"],\"teachingPoint\":\"Prioritize agents with demonstrated cardiorenal benefit and avoid hypoglycemia-prone regimens. SGLT2 inhibitors are recommended for individuals with CKD regardless of A1C (Diabetes Canada 2024; CCS 2022).\",\"appropriate\":[\"sglt2\",\"glp1\"],\"bestAlternative\":\"sglt2\"},{\"id\":\"case_ascvd\",\"title\":\"Patient with ASCVD\",\"summary\":\"64-year-old with prior MI, A1c 8.1%, BMI 36. Motivated for weight loss and stroke prevention.\",\"features\":{\"a1c\":8.1,\"bmi\":36,\"egfr\":72,\"ascvd\":true,\"hf\":false,\"costSensitive\":false,\"hypoglycemiaRisk\":false,\"weightLossGoal\":true,\"giIntolerance\":false},\"derivedTags\":[\"ascvd\",\"weight_loss_goal\"],\"teachingPoint\":\"Use GLP-1 RA or SGLT2i for cardiorenal risk reduction. GLP-1 RAs have strong evidence for MACE and nonfatal stroke reduction; preferred when weight loss is a priority (Diabetes Canada 2024; CCS 2022).\",\"appropriate\":[\"glp1\",\"sglt2\"],\"bestAlternative\":\"glp1\"},{\"id\":\"case_hf\",\"title\":\"Patient with Heart Failure\",\"summary\":\"62-year-old with HFrEF (LVEF 35%), A1c 7.8%, eGFR 58. On guideline-directed HF therapy; need to add glucose-lowering with cardiorenal benefit.\",\"features\":{\"a1c\":7.8,\"bmi\":30,\"egfr\":58,\"ascvd\":true,\"hf\":true,\"costSensitive\":false,\"hypoglycemiaRisk\":false,\"weightLossGoal\":false,\"giIntolerance\":false},\"derivedTags\":[\"hf\",\"ascvd\"],\"teachingPoint\":\"SGLT2 inhibitors are recommended for adults with HF (LVEF â‰¤40% or >40%) to reduce hospitalization for HF and, in HFrEF, mortality and kidney outcomes. Initiation is independent of A1C (CCS 2022; Diabetes Canada 2024).\",\"appropriate\":[\"sglt2\",\"glp1\"],\"bestAlternative\":\"sglt2\"},{\"id\":\"case_cost\",\"title\":\"Cost-Sensitive, New Diagnosis\",\"summary\":\"47-year-old, A1c 8.4%, no ASCVD/CKD/HF, limited drug coverage. Tolerates metformin.\",\"features\":{\"a1c\":8.4,\"bmi\":29,\"egfr\":85,\"ascvd\":false,\"hf\":false,\"costSensitive\":true,\"hypoglycemiaRisk\":false,\"weightLossGoal\":false,\"giIntolerance\":false},\"derivedTags\":[\"cost_sensitive\"],\"teachingPoint\":\"Metformin remains first-line when tolerated and affordable. Sulfonylureas are the least expensive alternative where financial barriers exist; consider hypoglycemia and weight when choosing (Diabetes Canada 2024).\",\"appropriate\":[\"metformin\",\"sulfonylurea\"],\"bestAlternative\":\"metformin\"},{\"id\":\"case_gi_intolerance\",\"title\":\"Patient with GI Intolerance to Metformin\",\"summary\":\"55-year-old, A1c 8.2%, eGFR 78, ASCVD. Cannot tolerate metformin due to persistent GI symptoms despite slow titration.\",\"features\":{\"a1c\":8.2,\"bmi\":32,\"egfr\":78,\"ascvd\":true,\"hf\":false,\"costSensitive\":false,\"hypoglycemiaRisk\":false,\"weightLossGoal\":true,\"giIntolerance\":true},\"derivedTags\":[\"ascvd\",\"weight_loss_goal\",\"gi_intolerance\"],\"teachingPoint\":\"In ASCVD with need for weight loss, prefer SGLT2i when GLP-1 RA is limited by GI intolerance. SGLT2i offer cardiorenal benefit without GI burden (Diabetes Canada 2024; CCS 2022).\",\"appropriate\":[\"sglt2\",\"dpp4\"],\"bestAlternative\":\"sglt2\"}]"],"names":[],"mappings":"AAAA"}},
    {"offset": {"line": 3449, "column": 3357}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3452, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/data/drugs.json"],"sourcesContent":["[{\"id\":\"metformin\",\"name\":\"Metformin\",\"description\":\"First-line oral biguanide that lowers hepatic glucose production and improves insulin sensitivity.\",\"benefits\":[\"Durable A1C lowering\",\"Negligible hypoglycemia or weight gain\",\"Long-term safety and affordability\"],\"risks\":[\"GI side effects (minimize with low initial dose)\",\"Vitamin B12 deficiency with long-term use\"],\"avoidIf\":[\"advanced_ckd\",\"gi_intolerance\"],\"preferIf\":[\"cost_sensitive\"],\"evidence\":[{\"id\":\"m1\",\"source\":\"Diabetes Canada 2024, Can J Diabetes\",\"quote\":\"Metformin is recommended as the initial antihyperglycemic medication because of its durable efficacy in lowering A1C, negligible risk for hypoglycemia or weight gain, relatively mild side-effect profile, long-term track record, and affordability.\"}]},{\"id\":\"sglt2\",\"name\":\"SGLT2 Inhibitor\",\"description\":\"Oral class that increases urinary glucose excretion and provides heart-kidney protection.\",\"benefits\":[\"Cardiorenal protection in CKD, HF, and high CV risk\",\"Weight loss\",\"Negligible hypoglycemia\"],\"risks\":[\"Genital mycotic infections\",\"Volume depletion\",\"Hold in acute illness; eGFR limits per product\"],\"avoidIf\":[],\"preferIf\":[\"ckd\",\"hf\",\"ascvd\"],\"evidence\":[{\"id\":\"s1\",\"source\":\"Diabetes Canada 2024, Can J Diabetes\",\"quote\":\"An SGLT2 inhibitor with demonstrated evidence of benefit is recommended for individuals with CKD (Grade A for canagliflozin, dapagliflozin, or empagliflozin).\"},{\"id\":\"s2\",\"source\":\"CCS 2022, Can J Cardiol\",\"quote\":\"In adults with HF and LVEF â‰¤40%, we recommend use of SGLT2i to reduce all-cause and CV mortality, hospitalization for HF, and composite kidney outcome.\"}]},{\"id\":\"glp1\",\"name\":\"GLP-1 Receptor Agonist\",\"description\":\"Incretin-based therapy (often injectable) that improves glucose control and supports weight loss.\",\"benefits\":[\"MACE reduction in high CV risk\",\"Weight loss\",\"Negligible hypoglycemia\",\"Nonfatal stroke reduction\"],\"risks\":[\"Nausea, vomiting, diarrhea (often transient)\",\"Avoid in pregnancy; safety unknown\"],\"avoidIf\":[\"gi_intolerance\"],\"preferIf\":[\"ascvd\",\"weight_loss_goal\"],\"evidence\":[{\"id\":\"g1\",\"source\":\"Diabetes Canada 2024, Can J Diabetes\",\"quote\":\"A GLP1-RA with demonstrated evidence of benefit is recommended for individuals at high CV risk (dulaglutide, liraglutide, or subcutaneous semaglutide).\"},{\"id\":\"g2\",\"source\":\"CCS 2022, Can J Cardiol\",\"quote\":\"GLP-1RA to reduce the risk of nonfatal stroke (Strong Recommendation; Moderate-Quality Evidence).\"}]},{\"id\":\"dpp4\",\"name\":\"DPP-4 Inhibitor\",\"description\":\"Oral incretin enhancer with modest glucose lowering and generally low hypoglycemia risk.\",\"benefits\":[\"Oral dosing\",\"Low hypoglycemia risk\",\"Weight neutral\"],\"risks\":[\"Modest A1C lowering vs GLP-1/SGLT2\",\"Some agents: heart failure signal in trials\"],\"avoidIf\":[\"hf\"],\"preferIf\":[],\"evidence\":[{\"id\":\"d1\",\"source\":\"Diabetes Canada 2024, Can J Diabetes\",\"quote\":\"Combinations of metformin with ... DPP4 inhibitors have broadly comparable A1C-lowering benefits. DPP4 inhibitors have a neutral effect on weight.\"}]},{\"id\":\"sulfonylurea\",\"name\":\"Sulfonylurea\",\"description\":\"Oral insulin secretagogue that lowers glucose effectively but can increase hypo risk.\",\"benefits\":[\"Effective A1C lowering\",\"Low cost\"],\"risks\":[\"Hypoglycemia\",\"Weight gain (1.5â€“5 kg)\"],\"avoidIf\":[\"high_hypoglycemia_risk\"],\"preferIf\":[\"cost_sensitive\"],\"evidence\":[{\"id\":\"su1\",\"source\":\"Diabetes Canada 2024, Can J Diabetes\",\"quote\":\"The risk of hypoglycemia is lower with incretins, SGLT2 inhibitors, and thiazolidinediones compared to sulfonylureas and insulin. Where financial barriers exist, sulfonylureas are the least expensive alternative.\"}]},{\"id\":\"basal_insulin\",\"name\":\"Basal Insulin\",\"description\":\"Long-acting insulin replacement used for strong glucose lowering, especially when control is severe.\",\"benefits\":[\"No dose ceiling; strong glucose lowering\",\"First-line in metabolic decompensation or severe symptomatic hyperglycemia\"],\"risks\":[\"Hypoglycemia\",\"Weight gain\",\"Injection burden\"],\"avoidIf\":[\"high_hypoglycemia_risk\"],\"preferIf\":[\"very_high_a1c\"],\"evidence\":[{\"id\":\"i1\",\"source\":\"Diabetes Canada 2024, Can J Diabetes\",\"quote\":\"Insulin, with or without metformin, is recommended as initial pharmacologic therapy for individuals with metabolic decompensation and/or severe symptomatic hyperglycemia.\"}]},{\"id\":\"prednisone\",\"name\":\"Prednisone (systemic steroid)\",\"description\":\"Systemic corticosteroid for inflammatory disease; not a diabetes glucose-lowering treatment.\",\"benefits\":[\"Not a glucose-lowering therapy\",\"Used for inflammatory disease, not routine T2DM management\"],\"risks\":[\"Can markedly worsen hyperglycemia\",\"Fluid retention and blood pressure worsening\",\"Higher infection risk with prolonged use\"],\"avoidIf\":[\"ascvd\",\"hf\"],\"contraindicatedIf\":[\"ckd\",\"high_hypoglycemia_risk\",\"weight_loss_goal\"],\"preferIf\":[],\"unsafeDecoy\":true,\"evidence\":[{\"id\":\"x1\",\"source\":\"Clinical safety principle\",\"quote\":\"Systemic corticosteroids are not first-line glucose-lowering treatment and may worsen glycemic control.\"}]},{\"id\":\"ibuprofen_high_dose\",\"name\":\"Ibuprofen (high-dose chronic)\",\"description\":\"NSAID analgesic/anti-inflammatory; not used to treat hyperglycemia.\",\"benefits\":[\"Analgesic/anti-inflammatory only\",\"No glucose-lowering benefit\"],\"risks\":[\"Can precipitate AKI and worsen CKD\",\"GI bleeding risk\",\"Can worsen blood pressure and fluid status\"],\"avoidIf\":[\"ckd\",\"hf\"],\"contraindicatedIf\":[\"ckd\"],\"preferIf\":[],\"unsafeDecoy\":true,\"evidence\":[{\"id\":\"x2\",\"source\":\"Clinical safety principle\",\"quote\":\"Chronic high-dose NSAID therapy is unsafe in CKD and does not treat hyperglycemia.\"}]},{\"id\":\"gentamicin\",\"name\":\"Gentamicin\",\"description\":\"Aminoglycoside antibiotic for serious infections; no role in chronic diabetes control.\",\"benefits\":[\"Antibiotic for selected severe infections\",\"No role in chronic glucose control\"],\"risks\":[\"Nephrotoxicity\",\"Ototoxicity\",\"Requires therapeutic drug monitoring\"],\"avoidIf\":[\"ckd\"],\"contraindicatedIf\":[\"ckd\",\"ascvd\",\"hf\",\"weight_loss_goal\",\"high_hypoglycemia_risk\",\"cost_sensitive\"],\"preferIf\":[],\"unsafeDecoy\":true,\"evidence\":[{\"id\":\"x3\",\"source\":\"Clinical safety principle\",\"quote\":\"Aminoglycosides are infection-directed agents and can cause serious kidney injury, especially in CKD.\"}]},{\"id\":\"warfarin\",\"name\":\"Warfarin\",\"description\":\"Vitamin K antagonist anticoagulant for clot prevention in specific indications, not glucose control.\",\"benefits\":[\"Anticoagulant for specific thromboembolic indications\",\"No glucose-lowering effect\"],\"risks\":[\"Major bleeding risk\",\"Frequent INR monitoring\",\"High interaction burden\"],\"avoidIf\":[\"high_hypoglycemia_risk\",\"ckd\"],\"contraindicatedIf\":[\"weight_loss_goal\",\"cost_sensitive\"],\"preferIf\":[],\"unsafeDecoy\":true,\"evidence\":[{\"id\":\"x4\",\"source\":\"Clinical safety principle\",\"quote\":\"Anticoagulation should only be used for clear thrombosis indications and is not treatment for hyperglycemia.\"}]}]"],"names":[],"mappings":"AAAA"}},
    {"offset": {"line": 3452, "column": 6926}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3456, "column": 0}, "map": {"version":3,"sources":["file:///Users/amyyong/Desktop/web%20dev/Simulose/t2dm-clinical-sim/src/lib/engine.ts"],"sourcesContent":["import casesRaw from \"@/data/cases.json\";\nimport drugsRaw from \"@/data/drugs.json\";\nimport type { DrugClass, Feedback, PatientCase } from \"@/lib/types\";\n\nconst drugs = drugsRaw as DrugClass[];\nconst cases = casesRaw as PatientCase[];\n\nexport function getAllCases() {\n  return cases;\n}\n\nexport function getAllDrugs() {\n  return drugs;\n}\n\nexport function gradeChoice(patient: PatientCase, selectedDrugId: string | null): Feedback | null {\n  if (!selectedDrugId) {\n    return {\n      headline: \"Choose a medication class\",\n      score: 0,\n      bullets: [\"Select an option to evaluate clinical fit for this patient.\"],\n      rationale: \"Use comorbidities, safety profile, and patient goals to guide your first-line choice.\",\n      sideEffects: [],\n      evidence: [],\n    };\n  }\n\n  const drug = drugs.find((d) => d.id === selectedDrugId);\n  if (!drug) return null;\n\n  const matchedAvoid = drug.avoidIf.filter((tag) => patient.derivedTags.includes(tag));\n  const matchedContra = (drug.contraindicatedIf ?? []).filter((tag) => patient.derivedTags.includes(tag));\n  const matchedPrefer = drug.preferIf.filter((tag) => patient.derivedTags.includes(tag));\n  const isUnsafeDecoy = !!drug.unsafeDecoy;\n\n  const isBest = selectedDrugId === patient.bestAlternative;\n  const isAppropriate = patient.appropriate.includes(selectedDrugId);\n\n  let score = 55;\n  let headline = \"Reasonable, but not optimal\";\n\n  if (isBest) {\n    score = 95;\n    headline = \"Best choice for this case\";\n  } else if (isAppropriate) {\n    score = 82;\n    headline = \"Appropriate choice\";\n  }\n\n  if (isUnsafeDecoy) {\n    score = 5;\n    headline = \"Dangerous choice\";\n  } else if (matchedContra.length > 0) {\n    score = Math.max(8, score - 60);\n    headline = \"Severely unsafe for this patient\";\n  } else if (matchedAvoid.length > 0) {\n    score = Math.max(25, score - 35);\n    headline = \"High-risk choice for this patient\";\n  }\n\n  const bullets: string[] = [];\n\n  if (isUnsafeDecoy) {\n    bullets.push(\"This option is intentionally unsafe/non-indicated in this simulator and can cause major harm.\");\n  }\n  if (matchedContra.length > 0) {\n    bullets.push(`Strong contraindication for this case: ${matchedContra.join(\", \")}.`);\n  }\n  if (matchedPrefer.length > 0) {\n    bullets.push(`Matches priority tags: ${matchedPrefer.join(\", \")}.`);\n  }\n  if (matchedAvoid.length > 0) {\n    bullets.push(`Conflicts with risk tags: ${matchedAvoid.join(\", \")}.`);\n  }\n\n  bullets.push(...(isAppropriate ? drug.benefits : drug.risks));\n\n  const rationale = isBest\n    ? patient.teachingPoint\n    : `Most preferred option in this case: ${formatDrugName(patient.bestAlternative)}.`;\n\n  return {\n    headline,\n    score,\n    bullets,\n    rationale,\n    sideEffects: drug.risks,\n    evidence: drug.evidence,\n  };\n}\n\nfunction formatDrugName(id: string) {\n  return drugs.find((d) => d.id === id)?.name ?? id;\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;;;AAGA,MAAM,QAAQ,uGAAQ;AACtB,MAAM,QAAQ,uGAAQ;AAEf,SAAS;IACd,OAAO;AACT;AAEO,SAAS;IACd,OAAO;AACT;AAEO,SAAS,YAAY,OAAoB,EAAE,cAA6B;IAC7E,IAAI,CAAC,gBAAgB;QACnB,OAAO;YACL,UAAU;YACV,OAAO;YACP,SAAS;gBAAC;aAA8D;YACxE,WAAW;YACX,aAAa,EAAE;YACf,UAAU,EAAE;QACd;IACF;IAEA,MAAM,OAAO,MAAM,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IACxC,IAAI,CAAC,MAAM,OAAO;IAElB,MAAM,eAAe,KAAK,OAAO,CAAC,MAAM,CAAC,CAAC,MAAQ,QAAQ,WAAW,CAAC,QAAQ,CAAC;IAC/E,MAAM,gBAAgB,CAAC,KAAK,iBAAiB,IAAI,EAAE,EAAE,MAAM,CAAC,CAAC,MAAQ,QAAQ,WAAW,CAAC,QAAQ,CAAC;IAClG,MAAM,gBAAgB,KAAK,QAAQ,CAAC,MAAM,CAAC,CAAC,MAAQ,QAAQ,WAAW,CAAC,QAAQ,CAAC;IACjF,MAAM,gBAAgB,CAAC,CAAC,KAAK,WAAW;IAExC,MAAM,SAAS,mBAAmB,QAAQ,eAAe;IACzD,MAAM,gBAAgB,QAAQ,WAAW,CAAC,QAAQ,CAAC;IAEnD,IAAI,QAAQ;IACZ,IAAI,WAAW;IAEf,IAAI,QAAQ;QACV,QAAQ;QACR,WAAW;IACb,OAAO,IAAI,eAAe;QACxB,QAAQ;QACR,WAAW;IACb;IAEA,IAAI,eAAe;QACjB,QAAQ;QACR,WAAW;IACb,OAAO,IAAI,cAAc,MAAM,GAAG,GAAG;QACnC,QAAQ,KAAK,GAAG,CAAC,GAAG,QAAQ;QAC5B,WAAW;IACb,OAAO,IAAI,aAAa,MAAM,GAAG,GAAG;QAClC,QAAQ,KAAK,GAAG,CAAC,IAAI,QAAQ;QAC7B,WAAW;IACb;IAEA,MAAM,UAAoB,EAAE;IAE5B,IAAI,eAAe;QACjB,QAAQ,IAAI,CAAC;IACf;IACA,IAAI,cAAc,MAAM,GAAG,GAAG;QAC5B,QAAQ,IAAI,CAAC,CAAC,uCAAuC,EAAE,cAAc,IAAI,CAAC,MAAM,CAAC,CAAC;IACpF;IACA,IAAI,cAAc,MAAM,GAAG,GAAG;QAC5B,QAAQ,IAAI,CAAC,CAAC,uBAAuB,EAAE,cAAc,IAAI,CAAC,MAAM,CAAC,CAAC;IACpE;IACA,IAAI,aAAa,MAAM,GAAG,GAAG;QAC3B,QAAQ,IAAI,CAAC,CAAC,0BAA0B,EAAE,aAAa,IAAI,CAAC,MAAM,CAAC,CAAC;IACtE;IAEA,QAAQ,IAAI,IAAK,gBAAgB,KAAK,QAAQ,GAAG,KAAK,KAAK;IAE3D,MAAM,YAAY,SACd,QAAQ,aAAa,GACrB,CAAC,oCAAoC,EAAE,eAAe,QAAQ,eAAe,EAAE,CAAC,CAAC;IAErF,OAAO;QACL;QACA;QACA;QACA;QACA,aAAa,KAAK,KAAK;QACvB,UAAU,KAAK,QAAQ;IACzB;AACF;AAEA,SAAS,eAAe,EAAU;IAChC,OAAO,MAAM,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,KAAK,QAAQ;AACjD"}},
    {"offset": {"line": 3550, "column": 0}, "map": {"version":3,"sources":["file:///Users/amyyong/Desktop/web%20dev/Simulose/t2dm-clinical-sim/src/components/CasePlayer.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useRef, useState } from \"react\";\nimport type { ReactNode } from \"react\";\nimport { ClinicScene3D } from \"@/components/ClinicScene3D\";\nimport type { DoctorMood } from \"@/components/GhostDoctor\";\nimport { getAllCases, getAllDrugs, gradeChoice } from \"@/lib/engine\";\nimport type { PatientReaction } from \"@/lib/types\";\n\ntype Mode = \"browse\" | \"learning\" | \"testing\" | \"diagnostic\";\ntype QuestionType = \"mcq\" | \"short_answer\";\ntype DifficultyLevel = \"basic\" | \"intermediate\" | \"advanced\";\ntype ChatMessage = { role: \"user\" | \"assistant\"; text: string };\ntype BubbleSource = \"context\" | \"chat\";\ntype DoctorErrorPayload = { error?: string; detail?: string };\ntype DiagnosticReview = {\n  score: number;\n  strengths: string[];\n  gaps: string[];\n  summary: string;\n};\nconst LEARNING_CONSOLIDATION_SECONDS = 30;\n\nexport function CasePlayer() {\n  const cases = getAllCases();\n  const drugs = getAllDrugs();\n\n  const [mode, setMode] = useState<Mode>(\"browse\");\n  const [questionType, setQuestionType] = useState<QuestionType>(\"mcq\");\n  const [caseId, setCaseId] = useState(cases[0]?.id ?? \"\");\n  const [testingIndex, setTestingIndex] = useState(0);\n  const [choice, setChoice] = useState<string | null>(null);\n  const [shortAnswerInput, setShortAnswerInput] = useState(\"\");\n  const [shortAnswerError, setShortAnswerError] = useState(\"\");\n  const [showHint, setShowHint] = useState(false);\n  const [breatherSecondsLeft, setBreatherSecondsLeft] = useState(0);\n  const [learningPhase, setLearningPhase] = useState<\"idle\" | \"timer\">(\"idle\");\n  const [showEmojiKey, setShowEmojiKey] = useState(false);\n  const [showDoctor, setShowDoctor] = useState(false);\n  const [doctorQuestion, setDoctorQuestion] = useState(\"\");\n  const [doctorLoading, setDoctorLoading] = useState(false);\n  const [bubbleSource, setBubbleSource] = useState<BubbleSource>(\"context\");\n  const [diagnosticDrugId, setDiagnosticDrugId] = useState<string | null>(null);\n  const [diagnosticThoughts, setDiagnosticThoughts] = useState(\"\");\n  const [diagnosticReview, setDiagnosticReview] = useState<DiagnosticReview | null>(null);\n  const [scoredPoints, setScoredPoints] = useState(0);\n  const [diagnosticAttemptScored, setDiagnosticAttemptScored] = useState(false);\n  const [doctorMessages, setDoctorMessages] = useState<ChatMessage[]>([\n    {\n      role: \"assistant\",\n      text: \"I am your AI Doctor coach. Ask about best medication choice, risks, side effects, or why an option is unsafe.\",\n    },\n  ]);\n\n  const testingComplete = mode === \"testing\" && testingIndex >= cases.length;\n  const testingPatient = testingComplete ? cases[0] : (cases[testingIndex] ?? cases[0]);\n  const patient = useMemo(() => {\n    if (mode === \"testing\") return testingPatient;\n    return cases.find((c) => c.id === caseId) ?? cases[0];\n  }, [mode, testingPatient, cases, caseId]);\n\n  const feedback = useMemo(() => {\n    if (choice) {\n      return gradeChoice(patient, choice);\n    }\n    return null;\n  }, [patient, choice]);\n\n  const riskScore = choice ? feedback?.score ?? 60 : 60;\n  const reaction = getPatientReaction(choice, feedback?.score ?? 0);\n  const celebrateIdeal = !!choice && (feedback?.score ?? 0) >= 95;\n  const feedbackEmoji = feedback ? getFeedbackEmoji(feedback.score) : \"\";\n  const testingAnswered = mode === \"testing\" && !!choice;\n  const learningConsolidationActive = mode === \"learning\" && learningPhase === \"timer\";\n  const selectedDrugName = choice ? drugs.find((drug) => drug.id === choice)?.name ?? choice : null;\n  const questionHint = buildQuestionHint(patient, questionType);\n  const diagnosticDrug = diagnosticDrugId ? drugs.find((drug) => drug.id === diagnosticDrugId) ?? null : null;\n  const scoredTestingAttempts = useRef<Set<string>>(new Set());\n  const difficultyLevel: DifficultyLevel =\n    scoredPoints >= 1500 ? \"advanced\" : scoredPoints >= 1000 ? \"intermediate\" : \"basic\";\n  const allowedTestingQuestionTypes: QuestionType[] = useMemo(() => [\"short_answer\"], []);\n  const doctorMood: DoctorMood = mode === \"diagnostic\"\n    ? getDoctorMoodFromScore(diagnosticReview?.score)\n    : getDoctorMoodFromScore(feedback?.score);\n  const doctorPromptText = buildDoctorPromptText({\n    mode,\n    diagnosticDrugName: diagnosticDrug?.name ?? null,\n    selectedDrugName,\n    feedbackScore: feedback?.score,\n  });\n  const latestDoctorReply = [...doctorMessages].reverse().find((message) => message.role === \"assistant\")?.text ?? null;\n  const doctorBubbleText =\n    bubbleSource === \"chat\" && latestDoctorReply ? latestDoctorReply : doctorPromptText;\n\n  useEffect(() => {\n    if (diagnosticDrugId || drugs.length === 0) return;\n    setDiagnosticDrugId(pickDiagnosticDrugId(drugs, null));\n  }, [diagnosticDrugId, drugs]);\n\n  useEffect(() => {\n    if (!learningConsolidationActive || breatherSecondsLeft <= 0) return;\n\n    const timer = window.setInterval(() => {\n      setBreatherSecondsLeft((prev) => (prev > 0 ? prev - 1 : 0));\n    }, 1000);\n\n    return () => window.clearInterval(timer);\n  }, [learningConsolidationActive, breatherSecondsLeft]);\n\n  useEffect(() => {\n    if (!learningConsolidationActive || breatherSecondsLeft > 0) return;\n    if (mode !== \"learning\") return;\n\n    const currentIndex = cases.findIndex((c) => c.id === caseId);\n    const nextIndex = currentIndex >= 0 ? (currentIndex + 1) % cases.length : 0;\n    setCaseId(cases[nextIndex]?.id ?? cases[0]?.id ?? \"\");\n    setChoice(null);\n    setLearningPhase(\"idle\");\n    setShowDoctor(false);\n  }, [learningConsolidationActive, breatherSecondsLeft, mode, cases, caseId]);\n\n  useEffect(() => {\n    if (mode !== \"testing\") return;\n    if (allowedTestingQuestionTypes.includes(questionType)) return;\n    setQuestionType(\"short_answer\");\n  }, [mode, allowedTestingQuestionTypes, questionType]);\n\n  useEffect(() => {\n    if (mode !== \"testing\" || !choice || !feedback) return;\n    const attemptKey = `${patient.id}:${testingIndex}:${choice}`;\n    if (scoredTestingAttempts.current.has(attemptKey)) return;\n    scoredTestingAttempts.current.add(attemptKey);\n    if (!patient.appropriate.includes(choice)) return;\n    const earned = getTestingPointsForScore(feedback.score ?? 80);\n    setScoredPoints((prev) => prev + earned);\n  }, [mode, choice, feedback, patient.id, testingIndex, patient.appropriate]);\n\n  function switchMode(nextMode: Mode) {\n    setMode(nextMode);\n    setBubbleSource(\"context\");\n    resetAttemptState();\n    if (nextMode === \"browse\") {\n      setQuestionType(\"mcq\");\n    }\n    if (nextMode === \"testing\") {\n      setQuestionType(\"short_answer\");\n      setTestingIndex(0);\n    }\n    if (nextMode === \"diagnostic\") {\n      setDiagnosticDrugId((prev) => pickDiagnosticDrugId(drugs, prev));\n      setDiagnosticThoughts(\"\");\n      setDiagnosticReview(null);\n      setDiagnosticAttemptScored(false);\n    }\n  }\n\n  function handleChoice(drugId: string) {\n    setShortAnswerError(\"\");\n    setChoice(drugId);\n    setBubbleSource(\"context\");\n  }\n\n  function nextAttempt() {\n    resetAttemptState();\n  }\n\n  function resetAttemptState() {\n    setChoice(null);\n    setShortAnswerInput(\"\");\n    setShortAnswerError(\"\");\n    setShowHint(false);\n    setBreatherSecondsLeft(0);\n    setLearningPhase(\"idle\");\n  }\n\n  function submitDiagnosticThoughts() {\n    if (!diagnosticDrug) return;\n    const content = diagnosticThoughts.trim();\n    if (content.length < 20) return;\n    const review = reviewDiagnosticThoughts(content, patient, diagnosticDrug);\n    setDiagnosticReview(review);\n    setBubbleSource(\"context\");\n    if (!diagnosticAttemptScored && review.score >= 70) {\n      const earned = Math.max(30, Math.round(review.score * 0.5));\n      setScoredPoints((prev) => prev + earned);\n      setDiagnosticAttemptScored(true);\n    }\n  }\n\n  function submitShortAnswer() {\n    const content = shortAnswerInput.trim();\n    if (!hasSufficientShortAnswerReasoning(content)) {\n      setShortAnswerError(\"Include both the medication class and a brief clinical reason (at least one sentence).\");\n      return;\n    }\n\n    const resolved = resolveDrugFromAnswer(content, drugs);\n    if (!resolved) {\n      setShortAnswerError(\"Could not match that answer. Try a medication class name from the choices.\");\n      return;\n    }\n    setShortAnswerError(\"\");\n    setChoice(resolved.id);\n    setBubbleSource(\"context\");\n  }\n\n  function startLearningConsolidation() {\n    setLearningPhase(\"timer\");\n    setBreatherSecondsLeft(LEARNING_CONSOLIDATION_SECONDS);\n  }\n\n  function openDoctorFromFeedback() {\n    const draftQuestion = selectedDrugName\n      ? `Can you explain why ${selectedDrugName} scored ${feedback?.score ?? \"this score\"} for this patient and what I should monitor next?`\n      : \"Can you explain this medication score and what I should monitor next?\";\n\n    if (!doctorQuestion.trim()) {\n      setDoctorQuestion(draftQuestion);\n    }\n    setShowDoctor(true);\n  }\n\n  async function askDoctor() {\n    const prompt = doctorQuestion.trim();\n    if (!prompt) return;\n    setDoctorMessages((prev) => [...prev, { role: \"user\", text: prompt }]);\n    setDoctorLoading(true);\n    setDoctorQuestion(\"\");\n    try {\n      const selectedDrug = choice ? drugs.find((drug) => drug.id === choice) ?? null : null;\n      const res = await fetch(\"/api/doctor\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          question: prompt,\n          context: {\n            mode,\n            patient,\n            selectedDrug,\n            feedback,\n          },\n        }),\n      });\n\n      if (!res.ok) {\n        const errBody = (await res.json().catch(() => ({}))) as DoctorErrorPayload;\n        const detail = errBody.detail?.trim();\n        const summary = errBody.error?.trim();\n        const message = detail ?? summary ?? `Request failed with status ${res.status}`;\n        throw new Error(message);\n      }\n\n      const data = (await res.json()) as { answer?: string };\n      const answer =\n        data.answer ??\n        \"I could not generate a response right now. Try rephrasing your question.\";\n      setDoctorMessages((prev) => [...prev, { role: \"assistant\", text: answer }]);\n      setBubbleSource(\"chat\");\n    } catch (error) {\n      const message =\n        error instanceof Error && error.message\n          ? error.message\n          : \"AI Doctor is currently unavailable. Check your API key configuration and try again.\";\n      setDoctorMessages((prev) => [\n        ...prev,\n        {\n          role: \"assistant\",\n          text: `AI Doctor is currently unavailable: ${message}`,\n        },\n      ]);\n      setBubbleSource(\"chat\");\n    } finally {\n      setDoctorLoading(false);\n    }\n  }\n\n  function renderInlineFeedback(): ReactNode {\n    if (!feedback || testingComplete) return null;\n\n    return (\n      <div className=\"inline-feedback\">\n        <div className=\"score-wrap\">\n          <p className=\"score\">{feedbackEmoji} Score: {feedback.score}/100</p>\n          <p className=\"headline\">{feedback.headline}</p>\n        </div>\n        <p className=\"rationale\">{feedback.rationale}</p>\n        <p className=\"feedback-label\">Key points</p>\n        <ul className=\"feedback-list\">\n          {feedback.bullets.map((item) => (\n            <li key={item}>{item}</li>\n          ))}\n        </ul>\n        {feedback.evidence.length > 0 && <p className=\"feedback-label\">Evidence</p>}\n        {feedback.evidence.length > 0 && (\n          <p className=\"evidence\">\n            Evidence: {feedback.evidence[0].source} - {feedback.evidence[0].quote}\n          </p>\n        )}\n        {feedback.sideEffects.length > 0 && (\n          <div className=\"side-effects\">\n            <p className=\"side-effects-title\">Potential side effects to monitor</p>\n            <ul>\n              {feedback.sideEffects.map((effect) => (\n                <li key={effect}>{explainSideEffect(effect)}</li>\n              ))}\n            </ul>\n          </div>\n        )}\n        {mode === \"learning\" && (\n          <div className=\"quiz-actions\">\n            <p className=\"rationale\">\n              Checkpoint: {selectedDrugName} scored {feedback.score}/100 for this case.\n            </p>\n            <button type=\"button\" onClick={startLearningConsolidation}>\n              Next: Start Consolidation Timer\n            </button>\n          </div>\n        )}\n        {mode === \"testing\" && (\n          <div className=\"quiz-actions\">\n            <button\n              type=\"button\"\n              onClick={() => {\n                nextAttempt();\n                setTestingIndex((i) => i + 1);\n              }}\n            >\n              View Next Patient\n            </button>\n          </div>\n        )}\n        {mode === \"testing\" && (\n          <div className=\"quiz-actions\">\n            <button type=\"button\" onClick={openDoctorFromFeedback}>\n              Speak to AI Doctor\n            </button>\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <main className=\"game-view\">\n      <div className=\"game-viewport\">\n        <ClinicScene3D\n          riskScore={riskScore}\n          reaction={reaction}\n          celebrateIdeal={celebrateIdeal}\n          feedbackEmoji={feedback ? feedbackEmoji : null}\n          doctorPromptText={doctorBubbleText}\n          doctorMood={doctorMood}\n          doctorShowBubble\n        />\n        <div className=\"hud hud-top\">\n          <div className=\"hud-header\">\n            <span className=\"hud-title\">Simulose</span>\n            <span className=\"hud-subtitle\">Patient medication simulator</span>\n          </div>\n          <div className=\"mode-picker\">\n            <select\n              id=\"mode-picker\"\n              className=\"mode-select\"\n              value={mode}\n              onChange={(e) => switchMode(e.target.value as Mode)}\n            >\n              <option value=\"\" disabled>\n                Choose a mode\n              </option>\n              <option value=\"browse\">Browse Mode</option>\n              <option value=\"learning\">Learning Mode</option>\n              <option value=\"testing\">Testing Mode</option>\n              <option value=\"diagnostic\">Diagnostic View</option>\n            </select>\n          </div>\n          {(mode === \"testing\" || mode === \"diagnostic\") && (\n            <p className=\"quiz-progress\">\n              Points: {scoredPoints} | Difficulty: {difficultyLevel}\n            </p>\n          )}\n          <div className=\"hud-case-picker\">\n            {mode !== \"testing\" ? (\n              <>\n                <select\n                  id=\"case-picker\"\n                  className=\"case-picker-select\"\n                  value={patient.id}\n                  onChange={(e) => {\n                    setCaseId(e.target.value);\n                    nextAttempt();\n                  }}\n                >\n                  <option value=\"\" disabled>\n                    Patient list\n                  </option>\n                  {cases.map((c) => (\n                    <option key={c.id} value={c.id}>\n                      {c.title}\n                    </option>\n                  ))}\n                </select>\n              </>\n            ) : (\n              <p className=\"quiz-progress\">\n                {testingComplete ? \"Testing complete\" : `Patient ${testingIndex + 1} of ${cases.length}`}\n              </p>\n            )}\n          </div>\n        </div>\n\n        <div className=\"floating-tools\">\n          {(mode === \"browse\" || mode === \"learning\") && (\n            <button\n              type=\"button\"\n              className=\"doctor-chat-launch\"\n              onClick={() => setShowDoctor((open) => !open)}\n              aria-expanded={showDoctor}\n              aria-controls=\"ai-doctor-panel\"\n            >\n              {showDoctor ? \"Hide Chat\" : \"Open Chat\"}\n            </button>\n          )}\n          <div className=\"emoji-key-wrap\">\n            <button\n              type=\"button\"\n              className=\"emoji-key-button\"\n              onClick={() => setShowEmojiKey((open) => !open)}\n              aria-expanded={showEmojiKey}\n              aria-controls=\"emoji-key-panel\"\n              aria-label=\"Toggle emoji key\"\n              title=\"Legend\"\n            >\n              <span aria-hidden=\"true\">ðŸ—ï¸</span>\n            </button>\n            {showEmojiKey && (\n              <div id=\"emoji-key-panel\" className=\"emoji-key-panel\">\n                <p className=\"emoji-key-title\">Feedback scale</p>\n                <p className=\"emoji-key-item\">ðŸ˜ 95-100: excellent match</p>\n                <p className=\"emoji-key-item\">ðŸ‘ 80-94: strong choice</p>\n                <p className=\"emoji-key-item\">ðŸ˜ 60-79: acceptable</p>\n                <p className=\"emoji-key-item\">ðŸ˜“ 40-59: weak fit</p>\n                <p className=\"emoji-key-item\">â˜¹ï¸ 20-39: poor choice</p>\n                <p className=\"emoji-key-item\">ðŸ’€ 0-19: dangerous choice</p>\n              </div>\n            )}\n          </div>\n        </div>\n\n        <div className=\"hud hud-left\">\n          <div className=\"hud-panel info-panel\">\n            <h2>{patient.title}</h2>\n            <p>{patient.summary}</p>\n            <p className=\"condition-line\">\n              Conditions: {describeConditions(patient)}\n            </p>\n            <div className=\"quick-tags\">\n              {buildImportantTags(patient).map((tag) => (\n                <span key={tag.label} className={`quick-tag ${tag.tone}`}>\n                  {tag.label}\n                </span>\n              ))}\n            </div>\n            <h3 className=\"stats-title\">Patient Stats</h3>\n            <div className=\"vitals-grid\">\n              <span>\n                <strong>A1c</strong>\n                {patient.features.a1c}% ({a1cInterpretation(patient.features.a1c)})\n              </span>\n              <span>\n                <strong>Kidney function</strong>\n                eGFR {patient.features.egfr} ({egfrInterpretation(patient.features.egfr)})\n              </span>\n              <span>\n                <strong>BMI</strong>\n                {patient.features.bmi} ({bmiInterpretation(patient.features.bmi)})\n              </span>\n              <span>\n                <strong>CV disease</strong>\n                {patient.features.ascvd ? \"Established ASCVD\" : \"No known ASCVD\"}\n              </span>\n              <span>\n                <strong>Hypoglycemia risk</strong>\n                {patient.features.hypoglycemiaRisk ? \"High - avoid low-triggering meds\" : \"Lower risk\"}\n              </span>\n              <span>\n                <strong>Cost consideration</strong>\n                {patient.features.costSensitive ? \"Important\" : \"Not primary\"}\n              </span>\n            </div>\n          </div>\n          <div className=\"hud-panel level-status-panel\">\n            <p className=\"feedback-label\">Progress</p>\n            <p className=\"headline\">Level: {difficultyLevel}</p>\n            <p className=\"score\">Points: {scoredPoints}</p>\n          </div>\n        </div>\n\n        {mode !== \"diagnostic\" && (\n        <div className=\"hud hud-right\">\n          {showDoctor && (\n            <div id=\"ai-doctor-panel\" className=\"hud-panel doctor-inline-panel\">\n              <div className=\"doctor-inline-header\">\n                <p className=\"doctor-title\">AI Doctor</p>\n                <button\n                  type=\"button\"\n                  className=\"feedback-chat-toggle\"\n                  onClick={() => setShowDoctor(false)}\n                >\n                  Close\n                </button>\n              </div>\n              <p className=\"doctor-subtitle\">Educational coach for this case</p>\n              <div className=\"doctor-chat\">\n                {doctorMessages\n                  .filter((message) => message.role === \"user\")\n                  .map((message, idx) => (\n                  <p key={`${message.role}-${idx}`} className={`doctor-message ${message.role}`}>\n                    {message.text}\n                  </p>\n                ))}\n              </div>\n              <form\n                className=\"doctor-input-row\"\n                onSubmit={(e) => {\n                  e.preventDefault();\n                  askDoctor();\n                }}\n              >\n                <textarea\n                  className=\"doctor-input\"\n                  rows={2}\n                  placeholder=\"Ask: Why is SGLT2 best here?\"\n                  value={doctorQuestion}\n                  onChange={(e) => setDoctorQuestion(e.target.value)}\n                />\n                <button type=\"submit\" className=\"doctor-send\" disabled={doctorLoading}>\n                  {doctorLoading ? \"Thinking...\" : \"Ask\"}\n                </button>\n              </form>\n            </div>\n          )}\n\n          <div className=\"hud-panel drug-panel\">\n            {mode === \"learning\" && learningConsolidationActive && feedback ? (\n              <>\n                <h3>Recall Summary</h3>\n                <p className=\"rationale\">\n                  {selectedDrugName}: {feedback.headline}\n                </p>\n                <ul className=\"drug-list\">\n                  {feedback.bullets.slice(0, 4).map((item) => (\n                    <li key={item}>{item}</li>\n                  ))}\n                </ul>\n                {feedback.sideEffects.length > 0 && (\n                  <>\n                    <p className=\"feedback-label\">Monitor for</p>\n                    <ul className=\"drug-list\">\n                      {feedback.sideEffects.map((effect) => (\n                        <li key={effect}>{effect}</li>\n                      ))}\n                    </ul>\n                  </>\n                )}\n              </>\n            ) : (\n              <>\n                <h3>{mode === \"testing\" ? \"Pick one medication\" : \"Medication choices\"}</h3>\n                {mode !== \"testing\" && (\n                  <div className=\"question-type-switch\" role=\"tablist\" aria-label=\"Question style\">\n                    {mode === \"browse\" ? (\n                      <button\n                        type=\"button\"\n                        className={questionType === \"mcq\" ? \"active\" : \"\"}\n                        onClick={() => {\n                          setQuestionType(\"mcq\");\n                          nextAttempt();\n                        }}\n                      >\n                        Medications\n                      </button>\n                    ) : (\n                      <>\n                        <button\n                          type=\"button\"\n                          className={questionType === \"mcq\" ? \"active\" : \"\"}\n                          onClick={() => {\n                            setQuestionType(\"mcq\");\n                            nextAttempt();\n                          }}\n                        >\n                          MCQ\n                        </button>\n                        <button\n                          type=\"button\"\n                          className={questionType === \"short_answer\" ? \"active\" : \"\"}\n                          onClick={() => {\n                            setQuestionType(\"short_answer\");\n                            nextAttempt();\n                          }}\n                        >\n                          Short Answer\n                        </button>\n                      </>\n                    )}\n                  </div>\n                )}\n                <div className=\"hint-row\">\n                  <button type=\"button\" className=\"hint-toggle\" onClick={() => setShowHint((v) => !v)}>\n                    {showHint ? \"Hide hint\" : \"Show hint\"}\n                  </button>\n                  {showHint && <p className=\"hint-text\">{questionHint}</p>}\n                </div>\n\n                {mode !== \"testing\" && questionType === \"mcq\" && (\n                  <div className=\"drug-grid\">\n                    {drugs.map((drug) => {\n                      const selected = choice === drug.id;\n                      const disabled = learningConsolidationActive;\n                      return (\n                        <div key={drug.id} className=\"drug-option-wrap\">\n                          <button\n                            type=\"button\"\n                            className={`drug-card ${selected ? \"selected\" : \"\"}`}\n                            onClick={() => handleChoice(drug.id)}\n                            disabled={disabled}\n                          >\n                            <strong className=\"drug-name\">{drug.name}</strong>\n                            <div className=\"drug-meta-block\">\n                              <p className=\"drug-label\">What it is</p>\n                              <p className=\"drug-meta\">{drug.description}</p>\n                            </div>\n                            <div className=\"drug-meta-block\">\n                              <p className=\"drug-label\">Benefits</p>\n                              <ul className=\"drug-list\">\n                                {drug.benefits.map((benefit) => (\n                                  <li key={`${drug.id}-benefit-${benefit}`}>{benefit}</li>\n                                ))}\n                              </ul>\n                            </div>\n                            <div className=\"drug-meta-block\">\n                              <p className=\"drug-label\">Potential side effects</p>\n                              <ul className=\"drug-list\">\n                                {drug.risks.map((risk) => (\n                                  <li key={`${drug.id}-risk-${risk}`}>{risk}</li>\n                                ))}\n                              </ul>\n                            </div>\n                          </button>\n                          {selected && renderInlineFeedback()}\n                        </div>\n                      );\n                    })}\n                  </div>\n                )}\n\n                {questionType === \"short_answer\" && (\n                  <div className=\"free-answer-block\">\n                    <p className=\"rationale\">\n                      Write the best medication class and explain why it fits this patient.\n                    </p>\n                    <textarea\n                      className=\"doctor-input\"\n                      rows={3}\n                      placeholder='Example: \"SGLT2 inhibitor, because CKD and hypoglycemia risk favor renal-protective, low-hypo options.\"'\n                      value={shortAnswerInput}\n                      onChange={(e) => setShortAnswerInput(e.target.value)}\n                    />\n                    {shortAnswerError && <p className=\"input-error\">{shortAnswerError}</p>}\n                    <div className=\"quiz-actions\">\n                      <button type=\"button\" onClick={submitShortAnswer}>\n                        Submit Short Answer\n                      </button>\n                    </div>\n                    {feedback && renderInlineFeedback()}\n                  </div>\n                )}\n              </>\n            )}\n          </div>\n\n          {mode === \"testing\" && testingComplete && (\n            <div className=\"hud-panel feedback-panel\">\n              <p className=\"headline\">Testing complete</p>\n              <p className=\"rationale\">You reviewed all patient scenarios. Restart to try again.</p>\n              <div className=\"quiz-actions\">\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    setTestingIndex(0);\n                    nextAttempt();\n                  }}\n                >\n                  Restart Testing\n                </button>\n              </div>\n            </div>\n          )}\n\n          {mode === \"learning\" && learningConsolidationActive && (\n            <div className=\"hud-panel feedback-panel consolidation-panel\">\n              <p className=\"headline\">Consolidation timer</p>\n              <p className=\"score\">{breatherSecondsLeft}s</p>\n              <p className=\"rationale\">\n                Review the reasoning mentally. The next patient will load automatically.\n              </p>\n            </div>\n          )}\n        </div>\n        )}\n\n        {mode === \"diagnostic\" && diagnosticDrug && (\n          <div className=\"hud hud-bottom\">\n            <div className=\"hud-panel bottom-prompt-panel\">\n              <p className=\"headline\">Answer Prompt</p>\n              <textarea\n                className=\"doctor-input\"\n                rows={2}\n                placeholder=\"\"\n                value={diagnosticThoughts}\n                onChange={(e) => setDiagnosticThoughts(e.target.value)}\n                disabled={!!diagnosticReview}\n              />\n              <div className=\"quiz-actions\">\n                <button type=\"button\" onClick={submitDiagnosticThoughts} disabled={!!diagnosticReview}>\n                  Submit Thoughts\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    setDiagnosticDrugId((prev) => pickDiagnosticDrugId(drugs, prev));\n                    setDiagnosticThoughts(\"\");\n                    setDiagnosticReview(null);\n                    setDiagnosticAttemptScored(false);\n                  }}\n                >\n                  New Medication Prompt\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </main>\n  );\n}\n\nfunction explainSideEffect(effect: string) {\n  const map: Record<string, string> = {\n    \"Genital infections\": \"Genital infections: counsel on hygiene and early treatment of symptoms.\",\n    \"Volume depletion\": \"Volume depletion: watch for dizziness, orthostasis, and dehydration.\",\n    \"Nausea\": \"Nausea: usually early and dose-related; slower titration may help.\",\n    \"Vomiting\": \"Vomiting: monitor hydration status and consider dose adjustment.\",\n    \"Modest A1c effect\": \"Modest A1c effect: glucose lowering may be limited; reassess A1c response.\",\n    \"Hypoglycemia\": \"Hypoglycemia: monitor glucose closely, especially if meal intake is inconsistent.\",\n    \"Weight gain\": \"Weight gain: discuss diet/activity plan and monitor weight trajectory.\",\n    \"Injection burden\": \"Injection burden: reinforce technique, adherence, and patient comfort.\",\n    \"GI upset\": \"GI upset: can improve with slower dose escalation or taking with food.\",\n    \"B12 deficiency with long-term use\": \"B12 deficiency risk with long-term use: check if neuropathy or anemia develops.\",\n  };\n  return map[effect] ?? `${effect}: review warning signs and follow-up monitoring.`;\n}\n\nfunction pickDiagnosticDrugId(\n  drugs: ReturnType<typeof getAllDrugs>,\n  previousDrugId: string | null\n) {\n  if (drugs.length === 0) return null;\n  const candidates = previousDrugId ? drugs.filter((drug) => drug.id !== previousDrugId) : drugs;\n  const pool = candidates.length > 0 ? candidates : drugs;\n  return pool[Math.floor(Math.random() * pool.length)]?.id ?? null;\n}\n\nfunction reviewDiagnosticThoughts(\n  text: string,\n  patient: ReturnType<typeof getAllCases>[number],\n  drug: ReturnType<typeof getAllDrugs>[number]\n): DiagnosticReview {\n  const normalized = text.toLowerCase();\n  const strengths: string[] = [];\n  const gaps: string[] = [];\n  let score = 0;\n\n  const mentionsKidney =\n    normalized.includes(\"kidney\") || normalized.includes(\"ckd\") || normalized.includes(\"egfr\");\n  const mentionsHypo =\n    normalized.includes(\"hypoglycemia\") || normalized.includes(\"hypo\") || normalized.includes(\"low sugar\");\n  const mentionsWeight = normalized.includes(\"weight\") || normalized.includes(\"bmi\");\n  const mentionsMonitoring =\n    normalized.includes(\"monitor\") || normalized.includes(\"side effect\") || normalized.includes(\"risk\");\n  const clearFitJudgment =\n    normalized.includes(\"appropriate\") || normalized.includes(\"avoid\") || normalized.includes(\"prefer\");\n\n  if (mentionsKidney) {\n    strengths.push(\"You linked your choice to kidney status.\");\n    score += 25;\n  } else {\n    gaps.push(\"Reference CKD/eGFR to ground your decision.\");\n  }\n  if (mentionsHypo) {\n    strengths.push(\"You considered hypoglycemia risk.\");\n    score += 20;\n  } else {\n    gaps.push(\"Include hypoglycemia risk in your reasoning.\");\n  }\n  if (mentionsWeight) {\n    strengths.push(\"You addressed weight implications.\");\n    score += 15;\n  } else {\n    gaps.push(\"Discuss expected weight impact.\");\n  }\n  if (mentionsMonitoring) {\n    strengths.push(\"You included a safety/monitoring plan.\");\n    score += 20;\n  } else {\n    gaps.push(\"Add what you would monitor after starting this medication.\");\n  }\n  if (clearFitJudgment) {\n    strengths.push(\"You made a clear appropriateness judgment.\");\n    score += 10;\n  } else {\n    gaps.push(\"State clearly if this drug is appropriate or not for this case.\");\n  }\n\n  if (patient.appropriate.includes(drug.id)) score += 10;\n  score = Math.min(100, score);\n\n  const summary = patient.appropriate.includes(drug.id)\n    ? `${drug.name} can be appropriate in this case when justified with CKD protection and low hypoglycemia burden.`\n    : `${drug.name} is less optimal here; explain why alternatives with stronger CKD/hypoglycemia profiles are preferred.`;\n\n  return { score, strengths, gaps, summary };\n}\n\nfunction getDoctorMoodFromScore(score?: number): DoctorMood {\n  if (typeof score !== \"number\") return \"neutral\";\n  if (score >= 85) return \"happy\";\n  if (score >= 65) return \"neutral\";\n  if (score >= 45) return \"concerned\";\n  return \"strict\";\n}\n\nfunction buildDoctorPromptText({\n  mode,\n  diagnosticDrugName,\n  selectedDrugName,\n  feedbackScore,\n}: {\n  mode: Mode;\n  diagnosticDrugName: string | null;\n  selectedDrugName: string | null;\n  feedbackScore?: number;\n}) {\n  if (mode === \"diagnostic\" && diagnosticDrugName) {\n    return pickBubbleVariant(\n      [\n        `Diagnostic question: Would you use ${diagnosticDrugName} for this patient, and why?`,\n        `Medication challenge: Is ${diagnosticDrugName} appropriate here or should we avoid it?`,\n        `Quick check: How would you justify ${diagnosticDrugName} in this case?`,\n      ],\n      `diagnostic:${diagnosticDrugName}`\n    );\n  }\n\n  if (mode === \"diagnostic\") {\n    return \"Diagnostic mode: Is this medication the best choice for this patient?\";\n  }\n\n  if (mode === \"browse\") {\n    if (selectedDrugName && typeof feedbackScore === \"number\") {\n      if (feedbackScore >= 85) return `${selectedDrugName}: strong pick for this patient.`;\n      if (feedbackScore >= 60) return `${selectedDrugName}: reasonable, but there may be a better fit.`;\n      return `${selectedDrugName}: weak fit here, re-check risks and priorities.`;\n    }\n    return \"Do you have any questions?\";\n  }\n\n  if (mode === \"learning\") {\n    if (selectedDrugName && typeof feedbackScore === \"number\") {\n      if (feedbackScore >= 85) return `${selectedDrugName}: great fit for this case.`;\n      if (feedbackScore >= 60) return `${selectedDrugName}: decent option, but we can optimize further.`;\n      return `${selectedDrugName}: not ideal here; reassess key risks and goals.`;\n    }\n    return \"Which medication would you choose?\";\n  }\n\n  if (mode === \"testing\") {\n    return \"Which medication would you choose?\";\n  }\n  return \"Do you have any questions?\";\n}\n\nfunction pickBubbleVariant(options: string[], seed: string) {\n  let hash = 0;\n  for (let i = 0; i < seed.length; i += 1) {\n    hash = (hash * 31 + seed.charCodeAt(i)) >>> 0;\n  }\n  return options[hash % options.length];\n}\n\nfunction getPatientReaction(choice: string | null, score: number): PatientReaction {\n  if (!choice) return \"neutral\";\n  if (score >= 85) return \"happy\";\n  if (score >= 60) return \"mildly_uncomfortable\";\n  if (score >= 20) return \"uncomfortable\";\n  return \"critical\";\n}\n\nfunction getFeedbackEmoji(score: number) {\n  if (score >= 95) return \"ðŸ˜\";\n  if (score >= 80) return \"ðŸ‘\";\n  if (score >= 60) return \"ðŸ˜\";\n  if (score >= 40) return \"ðŸ˜“\";\n  if (score >= 20) return \"â˜¹ï¸\";\n  return \"ðŸ’€\";\n}\n\nfunction getTestingPointsForScore(score: number) {\n  if (score >= 95) return 75;\n  if (score >= 80) return 50;\n  return Math.max(40, Math.round(score * 0.6));\n}\n\nfunction a1cInterpretation(a1c: number) {\n  if (a1c >= 9) return \"very high\";\n  if (a1c >= 8) return \"above goal\";\n  if (a1c >= 7) return \"slightly above goal\";\n  return \"near goal\";\n}\n\nfunction egfrInterpretation(egfr: number) {\n  if (egfr < 30) return \"advanced CKD\";\n  if (egfr < 60) return \"moderate CKD\";\n  return \"preserved\";\n}\n\nfunction bmiInterpretation(bmi: number) {\n  if (bmi >= 35) return \"severe obesity\";\n  if (bmi >= 30) return \"obesity\";\n  if (bmi >= 25) return \"overweight\";\n  return \"normal range\";\n}\n\nfunction buildImportantTags(patient: ReturnType<typeof getAllCases>[number]) {\n  const tags: Array<{ label: string; tone: \"warn\" | \"good\" | \"info\" }> = [];\n  if (patient.features.egfr < 60) tags.push({ label: \"CKD [Chronic Kidney Disease]\", tone: \"warn\" });\n  if (patient.features.ascvd) tags.push({ label: \"ASCVD [Atherosclerotic CV Disease]\", tone: \"warn\" });\n  if (patient.features.hf) tags.push({ label: \"HF [Heart Failure]\", tone: \"warn\" });\n  if (patient.features.hypoglycemiaRisk) tags.push({ label: \"High hypo risk\", tone: \"warn\" });\n  if (patient.features.weightLossGoal) tags.push({ label: \"Weight-loss goal\", tone: \"info\" });\n  if (patient.features.costSensitive) tags.push({ label: \"Cost sensitive\", tone: \"info\" });\n  if (tags.length === 0) tags.push({ label: \"No major comorbidity flags\", tone: \"good\" });\n  return tags;\n}\n\nfunction describeConditions(patient: ReturnType<typeof getAllCases>[number]) {\n  const conditions: string[] = [];\n  if (patient.features.egfr < 60) conditions.push(\"CKD [Chronic Kidney Disease]\");\n  if (patient.features.ascvd) conditions.push(\"ASCVD [Atherosclerotic Cardiovascular Disease]\");\n  if (patient.features.hf) conditions.push(\"HF [Heart Failure]\");\n  if (patient.features.giIntolerance) conditions.push(\"GI intolerance [Gastrointestinal side effects]\");\n  if (conditions.length === 0) return \"No major chronic conditions flagged.\";\n  return conditions.join(\", \");\n}\n\nfunction resolveDrugFromAnswer(\n  answer: string,\n  drugs: ReturnType<typeof getAllDrugs>\n) {\n  const normalized = answer.trim().toLowerCase();\n  if (!normalized) return null;\n\n  const aliases: Record<string, string> = {\n    sglt2: \"sglt2\",\n    \"sglt2 inhibitor\": \"sglt2\",\n    glp1: \"glp1\",\n    \"glp-1\": \"glp1\",\n    \"glp-1 ra\": \"glp1\",\n    \"glp1 ra\": \"glp1\",\n    metformin: \"metformin\",\n    dpp4: \"dpp4\",\n    \"dpp-4\": \"dpp4\",\n    \"dpp4 inhibitor\": \"dpp4\",\n    \"sulfonylurea\": \"sulfonylurea\",\n    \"sulfonylureas\": \"sulfonylurea\",\n    insulin: \"insulin\",\n  };\n\n  const directId = aliases[normalized] ?? normalized;\n  const byId = drugs.find((drug) => drug.id === directId);\n  if (byId) return byId;\n\n  const aliasMatch = Object.entries(aliases).find(([alias]) => normalized.includes(alias));\n  if (aliasMatch) {\n    const aliasDrug = drugs.find((drug) => drug.id === aliasMatch[1]);\n    if (aliasDrug) return aliasDrug;\n  }\n\n  return drugs.find((drug) => normalized.includes(drug.name.toLowerCase())) ?? null;\n}\n\nfunction buildQuestionHint(\n  patient: ReturnType<typeof getAllCases>[number],\n  questionType: QuestionType\n) {\n  const priorities: string[] = [];\n  if (patient.features.hf) priorities.push(\"prioritize heart-failure benefit\");\n  if (patient.features.ascvd) priorities.push(\"consider cardiovascular benefit\");\n  if (patient.features.egfr < 60) priorities.push(\"protect kidney function\");\n  if (patient.features.hypoglycemiaRisk) priorities.push(\"avoid hypoglycemia-prone options\");\n  if (patient.features.weightLossGoal) priorities.push(\"prefer weight-benefit options\");\n  if (patient.features.costSensitive) priorities.push(\"consider low-cost options\");\n\n  const priorityText = priorities.length > 0 ? priorities.join(\", \") : \"match therapy to case features\";\n\n  if (questionType === \"mcq\") {\n    return `Hint: ${priorityText}.`;\n  }\n  if (questionType === \"short_answer\") {\n    return `Hint: answer with medication class plus reasoning in one response (example: SGLT2 inhibitor because CKD and low hypoglycemia risk). Focus on: ${priorityText}.`;\n  }\n  return `Hint: ${priorityText}.`;\n}\n\nfunction hasSufficientShortAnswerReasoning(answer: string) {\n  const normalized = answer.trim().toLowerCase();\n  if (normalized.length < 25) return false;\n\n  const wordCount = normalized.split(/\\s+/).filter(Boolean).length;\n  if (wordCount < 6) return false;\n\n  const reasoningSignals = [\n    \"because\",\n    \"since\",\n    \"due to\",\n    \"given\",\n    \"risk\",\n    \"benefit\",\n    \"avoid\",\n    \"prefer\",\n    \"monitor\",\n    \"kidney\",\n    \"egfr\",\n    \"ckd\",\n    \"hypoglycemia\",\n    \"weight\",\n    \"cost\",\n    \"ascvd\",\n    \"heart failure\",\n    \"hf\",\n  ];\n\n  return reasoningSignals.some((token) => normalized.includes(token));\n}\n"],"names":[],"mappings":"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"}}]
}